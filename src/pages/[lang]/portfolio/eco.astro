---
// Import du layout avec mode éco activé
import Layout from "../../../layouts/layout.astro";
import EcoModeInfo from "../../../components/eco_mode_info.astro";

// Récupérer le paramètre de langue depuis l'URL
export function getStaticPaths() {
  return [
    { params: { lang: "fr" } },
    { params: { lang: "en" } },
    { params: { lang: "de" } },
  ];
}

const lang = Astro.params.lang as "fr" | "en" | "de";

// Contenu traduit pour chaque langue
const content = {
  fr: {
    title: "Portfolio personnel éco-responsable | Josselin HANEL (Mode Éco)",
    description: "Version éco-responsable de la page présentant mon portfolio personnel multilingue avec mode éco.",
    projectTitle: "Portfolio personnel éco-responsable",
    projectIntro: "Ce portfolio a été conçu pour montrer qu'un site web performant et agréable à utiliser peut aussi être léger et respectueux des ressources.",

    overviewTitle: "Aperçu du projet",
    overviewText: "Ce site propose deux versions : standard et éco. La version éco que vous consultez actuellement est délibérément simplifiée pour offrir un accès plus rapide à l'information, surtout sur mobile et connexions limitées.",

    architectureTitle: "Architecture du projet",
    frontendDetails: [
      "Astro pour générer du HTML statique avec peu ou pas de JavaScript",
      "Tailwind CSS pour des styles optimisés et une empreinte CSS minimale",
      "Support multilingue (français, anglais, allemand)",
      "Mode éco accessible via une URL distincte pour un partage direct"
    ],

    challengesTitle: "Défis techniques",
    challenges: [
      "Créer une expérience utilisateur fluide avec un minimum de JavaScript",
      "Concevoir une version éco qui ne sacrifie pas l'information essentielle",
      "Mettre en place un système de navigation multilingue simple",
      "Réduire drastiquement la taille des pages sans compromettre la lisibilité"
    ],
    
    solutionsTitle: "Solutions pratiques",
    solutions: [
      {
        title: "Architecture simple",
        description: "Pages statiques avec hydratation minimale, pour une navigation rapide sans surcharge du navigateur."
      },
      {
        title: "Mode Éco direct",
        description: "Une version du site qui élimine le superflu pour aller droit à l'essentiel, particulièrement appréciable sur mobile ou connexion lente."
      },
      {
        title: "Navigation multilingue",
        description: "Système basé sur l'URL qui permet de partager directement une page dans la langue de votre choix."
      },
      {
        title: "Design minimaliste",
        description: "Interface épurée qui donne la priorité au contenu plutôt qu'aux effets visuels gourmands en ressources."
      }
    ],
    
    cookielessWebTitle: "Un web sans bandeaux de cookies",
    cookielessWebText: "Avez-vous remarqué l'absence de bandeau de cookies sur ce site ? Les sites qui n'utilisent des cookies que pour des fonctionnalités essentielles n'ont pas besoin de votre consentement selon le RGPD. Ce portfolio respecte votre vie privée par défaut : pas de trackers, pas d'analytics, pas de publicité.",
    cookielessWebVision: "Imaginez un web où la majorité des sites adoptent cette approche : une expérience plus fluide, moins de frustration et plus de respect pour l'attention de l'utilisateur.",
    
    ecoApproachTitle: "Avantages du mode éco",
    ecoApproach: [
      "Chargement quasi instantané des pages (moins de ressources à télécharger)",
      "Navigation simplifiée qui va droit au but",
      "Meilleure expérience sur appareils anciens ou connexions limitées",
      "Consommation d'énergie réduite (moins de calculs côté navigateur)",
    ],
    
    performanceTitle: "Performance et impact",
    benchmarks: [
      {
        metric: "Taille de page (mode standard)",
        value: "< 200 Ko"
      },
      {
        metric: "Taille de page (mode éco)",
        value: "< 50 Ko"
      },
      {
        metric: "Temps de chargement",
        value: "< 1 seconde"
      },
      {
        metric: "Score Lighthouse",
        value: "99-100/100"
      }
    ],
    
    techTitle: "Technologies utilisées",
    techUsed: "Astro, TailwindCSS, très peu de JavaScript/TypeScript",
    
    visitSite: "Visiter le site",
    viewSourceCode: "Voir le code source",
    allProjects: "Tous les projets",
    nextProject: "Projet suivant",
    prevProject: "Projet précédent",

    reflectionTitle: "Pourquoi un mode éco?",
    reflectionText: "Je crois qu'un bon site web devrait d'abord être accessible et rapide. Le mode éco n'est pas qu'une question d'environnement : c'est aussi une meilleure expérience pour beaucoup d'utilisateurs. Combien de fois avez-vous quitté un site parce qu'il était trop lent à charger, encombré de publicités, ou vous harcelait pour accepter des cookies? Je préfère un web plus léger, qui respecte l'attention de l'utilisateur et fonctionne bien sur tous les appareils sans frustration. Ce portfolio est ma modeste contribution à cette vision."
  },
  en: {
    title: "Eco-friendly Personal Portfolio | Josselin HANEL (Eco Mode)",
    description: "Eco-friendly version of the page presenting my multilingual personal portfolio with eco mode.",
    projectTitle: "Eco-friendly Personal Portfolio",
    projectIntro: "This portfolio was designed to demonstrate that a high-performing, pleasant-to-use website can also be lightweight and resource-efficient.",

    overviewTitle: "Project Overview",
    overviewText: "This site offers two versions: standard and eco. The eco version you're currently viewing is deliberately simplified to provide faster access to information, especially on mobile devices and limited connections.",

    architectureTitle: "Project Architecture",
    frontendDetails: [
      "Astro for generating static HTML with little to no JavaScript",
      "Tailwind CSS for optimized styles and minimal CSS footprint",
      "Multilingual support (French, English, German)",
      "Eco mode accessible via a distinct URL for direct sharing"
    ],

    challengesTitle: "Technical Challenges",
    challenges: [
      "Creating a smooth user experience with minimal JavaScript",
      "Designing an eco version that doesn't sacrifice essential information",
      "Setting up a simple multilingual navigation system",
      "Drastically reducing page size without compromising readability"
    ],
    
    solutionsTitle: "Practical Solutions",
    solutions: [
      {
        title: "Simple Architecture",
        description: "Static pages with minimal hydration for fast navigation without overloading the browser."
      },
      {
        title: "Direct Eco Mode",
        description: "A version of the site that eliminates the superfluous to get straight to the point, particularly valuable on mobile or slow connections."
      },
      {
        title: "Multilingual Navigation",
        description: "URL-based system that allows sharing a page directly in the language of your choice."
      },
      {
        title: "Minimalist Design",
        description: "Clean interface that prioritizes content over resource-intensive visual effects."
      }
    ],
    
    cookielessWebTitle: "A web without cookie banners",
    cookielessWebText: "Have you noticed there's no cookie banner on this site? Websites that only use cookies for essential functionalities don't need your consent under GDPR. This portfolio respects your privacy by default: no trackers, no analytics, no ads.",
    cookielessWebVision: "Imagine a web where most sites adopt this approach: a smoother experience, less frustration, and more respect for user attention.",
    
    ecoApproachTitle: "Benefits of Eco Mode",
    ecoApproach: [
      "Near-instant page loading (fewer resources to download)",
      "Streamlined navigation that gets straight to the point",
      "Better experience on older devices or limited connections",
      "Reduced energy consumption (less computation on the browser side)",
    ],
    
    performanceTitle: "Performance and Impact",
    benchmarks: [
      {
        metric: "Page Size (Standard Mode)",
        value: "< 200 Kb"
      },
      {
        metric: "Page Size (Eco Mode)",
        value: "< 70 Kb"
      },
      {
        metric: "Loading Time",
        value: "< 1 second"
      },
      {
        metric: "Lighthouse Score",
        value: "99-100/100"
      }
    ],
    
    techTitle: "Technologies Used",
    techUsed: "Astro, TailwindCSS, minimal JavaScript",
    
    visitSite: "Visit Site",
    viewSourceCode: "View Source Code",
    allProjects: "All Projects",
    nextProject: "Next Project",
    prevProject: "Previous Project",

    reflectionTitle: "Why an Eco Mode?",
    reflectionText: "I believe a good website should be accessible and fast first and foremost. Eco mode isn't just about the environment—it's also a better experience for many users. How many times have you left a site because it was too slow to load, cluttered with ads, or harassing you to accept cookies? I prefer a lighter web that respects user attention and works well on all devices without frustration. This portfolio is my modest contribution to that vision."
  },
  de: {
    title: "Umweltfreundliches persönliches Portfolio | Josselin HANEL (Öko-Modus)",
    description: "Umweltfreundliche Version der Seite, die mein mehrsprachiges persönliches Portfolio mit Öko-Modus präsentiert.",
    projectTitle: "Umweltfreundliches persönliches Portfolio",
    projectIntro: "Dieses Portfolio wurde entwickelt, um zu zeigen, dass eine leistungsstarke, angenehm zu bedienende Website auch leicht und ressourceneffizient sein kann.",

    overviewTitle: "Projektübersicht",
    overviewText: "Diese Website bietet zwei Versionen: Standard und Öko. Die Öko-Version, die Sie gerade betrachten, ist bewusst vereinfacht, um schnelleren Zugriff auf Informationen zu ermöglichen, besonders auf Mobilgeräten und bei begrenzten Verbindungen.",

    architectureTitle: "Projektarchitektur",
    frontendDetails: [
      "Astro zur Generierung von statischem HTML mit wenig bis gar keinem JavaScript",
      "Tailwind CSS für optimierte Stile und minimalen CSS-Fußabdruck",
      "Mehrsprachige Unterstützung (Französisch, Englisch, Deutsch)",
      "Öko-Modus über eine eigene URL für direktes Teilen zugänglich"
    ],

    challengesTitle: "Technische Herausforderungen",
    challenges: [
      "Schaffung einer flüssigen Benutzererfahrung mit minimalem JavaScript",
      "Gestaltung einer Öko-Version, die nicht auf wesentliche Informationen verzichtet",
      "Einrichtung eines einfachen mehrsprachigen Navigationssystems",
      "Drastische Reduzierung der Seitengröße ohne Beeinträchtigung der Lesbarkeit"
    ],
    
    solutionsTitle: "Praktische Lösungen",
    solutions: [
      {
        title: "Einfache Architektur",
        description: "Statische Seiten mit minimaler Hydratation für schnelle Navigation ohne den Browser zu überlasten."
      },
      {
        title: "Direkter Öko-Modus",
        description: "Eine Version der Website, die das Überflüssige eliminiert, um direkt auf den Punkt zu kommen, besonders wertvoll bei mobilen oder langsamen Verbindungen."
      },
      {
        title: "Mehrsprachige Navigation",
        description: "URL-basiertes System, das das direkte Teilen einer Seite in der Sprache Ihrer Wahl ermöglicht."
      },
      {
        title: "Minimalistisches Design",
        description: "Übersichtliche Benutzeroberfläche, die Inhalte gegenüber ressourcenintensiven visuellen Effekten priorisiert."
      }
    ],
    
    cookielessWebTitle: "Ein Web ohne Cookie-Banner",
    cookielessWebText: "Haben Sie bemerkt, dass es auf dieser Website kein Cookie-Banner gibt? Websites, die Cookies nur für wesentliche Funktionalitäten verwenden, benötigen nach der DSGVO nicht Ihre Einwilligung. Dieses Portfolio respektiert Ihre Privatsphäre standardmäßig: keine Tracker, keine Analysetools, keine Werbung.",
    cookielessWebVision: "Stellen Sie sich ein Web vor, in dem die meisten Websites diesen Ansatz verfolgen: ein reibungsloseres Erlebnis, weniger Frustration und mehr Respekt für die Aufmerksamkeit der Benutzer.",
    
    ecoApproachTitle: "Vorteile des Öko-Modus",
    ecoApproach: [
      "Nahezu sofortiges Laden von Seiten (weniger Ressourcen zum Herunterladen)",
      "Optimierte Navigation, die direkt zum Punkt kommt",
      "Bessere Erfahrung auf älteren Geräten oder begrenzten Verbindungen",
      "Reduzierter Energieverbrauch (weniger Berechnungen auf der Browser-Seite)",
    ],
    
    performanceTitle: "Leistung und Auswirkungen",
    benchmarks: [
      {
        metric: "Seitengröße (Standardmodus)",
        value: "< 200 KB"
      },
      {
        metric: "Seitengröße (Öko-Modus)",
        value: "< 70 KB"
      },
      {
        metric: "Ladezeit",
        value: "< 1 Sekunde"
      },
      {
        metric: "Lighthouse-Punktzahl",
        value: "99-100/100"
      }
    ],
    
    techTitle: "Verwendete Technologien",
    techUsed: "Astro, TailwindCSS, minimales JavaScript",
    
    visitSite: "Seite besuchen",
    viewSourceCode: "Quellcode ansehen",
    allProjects: "Alle Projekte",
    nextProject: "Nächstes Projekt",
    prevProject: "Vorheriges Projekt",

    reflectionTitle: "Warum ein Öko-Modus?",
    reflectionText: "Ich glaube, dass eine gute Website in erster Linie zugänglich und schnell sein sollte. Der Öko-Modus betrifft nicht nur die Umwelt – er bietet auch eine bessere Erfahrung für viele Benutzer. Wie oft haben Sie eine Website verlassen, weil sie zu langsam geladen wurde, mit Werbung überladen war oder Sie belästigte, Cookies zu akzeptieren? Ich bevorzuge ein leichteres Web, das die Aufmerksamkeit der Benutzer respektiert und auf allen Geräten ohne Frustration gut funktioniert. Dieses Portfolio ist mein bescheidener Beitrag zu dieser Vision."
  }
};

// Obtenir les projets précédent et suivant selon la langue
const getProjectUrl = (projectId: string) => `/${lang}/projects/${projectId}/eco`;
const prevProject = {
  id: "esport",
  title: lang === "fr" ? 
    "Application e-sport avec chat" :
    (lang === "en" ? 
      "E-sport Application with Chat" : 
      "E-Sport-Anwendung mit Chat")
};

// Utiliser la langue demandée ou français par défaut
const t = content[lang] || content.fr;

// Mode éco activé
const isEcoMode = true;
---

<Layout title={t.title} description={t.description} lang={lang} isEcoMode={isEcoMode}>
  <div class="container mx-auto px-4 py-6">
    <!-- Utilisation du composant EcoModeInfo -->
    <EcoModeInfo lang={lang} />

    <div class="mb-4">
      <a href={`/${lang}/projects/eco/`} class="text-text-muted hover:text-accent transition-colors">
        &larr; {t.allProjects}
      </a>
    </div>
    
    <!-- En-tête du projet -->
    <header class="mb-8">
      <h1 class="text-2xl font-bold mb-4 border-b border-accent pb-2">
        {t.projectTitle} (2025)
      </h1>
      <p class="mb-4 max-w-4xl">
        {t.projectIntro}
      </p>
    </header>
    
    <!-- Aperçu du projet -->
    <section class="mb-8 border-b border-secondary pb-6">
      <h2 class="text-xl font-semibold mb-3 text-accent">
        {t.overviewTitle}
      </h2>
      <p class="mb-4 max-w-4xl">
        {t.overviewText}
      </p>
      
      <!-- Actions principales -->
      <div class="flex flex-wrap gap-4 mb-8">
        <a
          href="https://github.com/KewneWhimsy/eco_portfolio/"
          target="_blank"
          rel="noopener noreferrer"
          class="btn-secondary"
        >
          {t.viewSourceCode}
        </a>
      </div>
    </section>
    
    <!-- Architecture du projet -->
    <section class="mb-8 border-b border-secondary pb-6">
      <h2 class="text-xl font-semibold mb-3 text-accent">
        {t.architectureTitle}
      </h2>
      
      <div class="mb-4">
        <ul class="list-disc pl-5 mb-3">
          {t.frontendDetails.map(detail => (
            <li class="mb-1">{detail}</li>
          ))}
        </ul>
      </div>
    </section>
    
    <!-- Défis techniques -->
    <section class="mb-8 border-b border-secondary pb-6">
      <h2 class="text-xl font-semibold mb-3 text-accent">
        {t.challengesTitle}
      </h2>
      <ul class="list-disc pl-5 mb-3">
        {t.challenges.map(challenge => (
          <li class="mb-2">{challenge}</li>
        ))}
      </ul>
    </section>
    
    <!-- Solutions mises en œuvre -->
    <section class="mb-8 border-b border-secondary pb-6">
      <h2 class="text-xl font-semibold mb-3 text-accent">
        {t.solutionsTitle}
      </h2>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mb-3">
        {t.solutions.map(solution => (
          <div class="bg-secondary bg-opacity-10 p-3 rounded">
            <h3 class="font-medium mb-1">{solution.title}</h3>
            <p class="text-text-muted">{solution.description}</p>
          </div>
        ))}
      </div>
    </section>
    
    <!-- Section sur les bandeaux de cookies -->
    <section class="mb-8 border-b border-secondary pb-6 max-w-4xl text-balance">
      <h2 class="text-xl font-semibold mb-3 text-accent">
        {t.cookielessWebTitle}
      </h2>
      
      <p class="mb-3">
        {t.cookielessWebText}
      </p>
      
      <p>
        {t.cookielessWebVision}
      </p>
    </section>
    
    <!-- Avantages du mode éco -->
    <section class="mb-8 border-b border-secondary pb-6">
      <h2 class="text-xl font-semibold mb-3 text-accent">
        {t.ecoApproachTitle}
      </h2>
      <ul class="list-disc pl-5 mb-3">
        {t.ecoApproach.map(item => (
          <li class="mb-1">{item}</li>
        ))}
      </ul>
    </section>
    
    <!-- Mesures de performance -->
    <section class="mb-8 border-b border-secondary pb-6">
      <h2 class="text-xl font-semibold mb-3 text-accent">
        {t.performanceTitle}
      </h2>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-2 mb-3">
        {t.benchmarks.map(benchmark => (
          <div class="bg-secondary bg-opacity-5 p-3 rounded">
            <div class="flex justify-between">
              <span class="text-text-muted">{benchmark.metric}</span>
              <span class="font-medium text-accent">{benchmark.value}</span>
            </div>
          </div>
        ))}
      </div>
    </section>
    
    <!-- Section sur ClientRouter -->
    <section class="mb-8 border-b border-secondary pb-6">
        <h2 class="text-xl font-semibold mb-3 text-accent">
          ClientRouter & transition-persist
        </h2>
        
        <p class="mb-3 max-w-4xl text-balance">
          {lang === "fr" ? 
            "Le mode éco désactive délibérément le <code>ClientRouter</code> d'Astro 5, contrairement au mode standard qui l'utilise pour des transitions fluides. C'est une décision délibérée qui offre plusieurs avantages :" :
            lang === "en" ? 
            "Eco mode deliberately disables Astro 5's <code>ClientRouter</code>, unlike standard mode which uses it for smooth transitions. This is a deliberate decision that offers several advantages:" :
            "Der Öko-Modus deaktiviert bewusst den <code>ClientRouter</code> von Astro 5, im Gegensatz zum Standardmodus, der ihn für reibungslose Übergänge verwendet. Dies ist eine bewusste Entscheidung, die mehrere Vorteile bietet:"}
        </p>
        
        <ul class="list-disc pl-5 mb-3">
          <li class="mb-1">
            {lang === "fr" ? 
              "Moins de JavaScript à charger et exécuter par le navigateur" :
              lang === "en" ? 
              "Less JavaScript to load and execute by the browser" :
              "Weniger JavaScript, das vom Browser geladen und ausgeführt werden muss"}
          </li>
          <li class="mb-1">
            {lang === "fr" ? 
              "Navigation plus directe et légère, idéale pour connexions limitées" :
              lang === "en" ? 
              "More direct and lightweight navigation, ideal for limited connections" :
              "Direktere und leichtere Navigation, ideal für begrenzte Verbindungen"}
          </li>
          <li class="mb-1">
            {lang === "fr" ? 
              "Moins de traitements côté client, économisant la batterie sur mobile" :
              lang === "en" ? 
              "Less client-side processing, saving battery on mobile" :
              "Weniger clientseitige Verarbeitung, spart Akku auf dem Mobilgerät"}
          </li>
          <li class="mb-1">
            {lang === "fr" ? 
              "Compatibilité améliorée avec les appareils plus anciens ou moins puissants" :
              lang === "en" ? 
              "Improved compatibility with older or less powerful devices" :
              "Verbesserte Kompatibilität mit älteren oder weniger leistungsstarken Geräten"}
          </li>
        </ul>
        
        <p>
          {lang === "fr" ? 
            "Cette approche montre qu'il est possible d'adapter l'expérience utilisateur en fonction du contexte d'utilisation, sans compromettre l'accès à l'information." :
            lang === "en" ? 
            "This approach shows that it's possible to adapt the user experience according to the usage context, without compromising access to information." :
            "Dieser Ansatz zeigt, dass es möglich ist, das Benutzererlebnis an den Nutzungskontext anzupassen, ohne den Zugang zu Informationen zu beeinträchtigen."}
        </p>
    </section>
    
    <!-- Pourquoi un mode éco -->
    <section class="mb-8 border-b border-secondary pb-6">
      <h2 class="text-xl font-semibold mb-3 text-accent">
        {t.reflectionTitle}
      </h2>
      <p class="italic mb-3 max-w-4xl">
        {t.reflectionText}
      </p>
    </section>
    
    <!-- Technologies utilisées -->
    <section class="mb-8">
      <h2 class="text-xl font-semibold mb-3 text-accent">
        {t.techTitle}
      </h2>
      <p class="mb-3 max-w-4xl">
        {t.techUsed}
      </p>
    </section>
    
    <!-- Navigation entre projets -->
    <div class="pt-8 mt-12 flex justify-between">
      <a href={`/${lang}/esport/eco/`} class="text-link">
        &larr; {t.prevProject}: {prevProject.title}
      </a>
    </div>
  </div>
</Layout>