---
// Import du layout avec mode √©co activ√©
import Layout from "../../../layouts/layout.astro";
import EcoModeInfo from "../../../components/eco_mode_info.astro";

// R√©cup√©rer le param√®tre de langue depuis l'URL
export function getStaticPaths() {
  return [
    { params: { lang: "fr" } },
    { params: { lang: "en" } },
    { params: { lang: "de" } },
  ];
}

const lang = Astro.params.lang as 'fr' | 'en' | 'de';

// Contenu traduit pour chaque langue (version simplifi√©e pour mode √©co)
const content = {
  fr: {
    title: "Josselin HANEL - Services & Tarifs (Mode √âco)",
    description: "Version √©co-responsable de mes services avec une empreinte carbone minimale.",
    pageTitle: "Services & Tarifs",
    intro: "Sites web performants et durables, avec peu ou pas de frais r√©currents.",
    
    // Services simplifi√©s mais complets
    servicesTitle: "Mes services",
    
    vitrineTitle: "Site Vitrine",
    vitrineOptions: [
      {
        name: "Site √âternel",
        price: "√Ä partir de 1400‚Ç¨",
        maintenance: "0‚Ç¨/an",
        desc: "Site immortel en pur HTML/CSS, sans maintenance n√©cessaire",
        features: [
          "3-7 pages responsive",
          "SEO optimis√©",
          "2 modifications mineures/an offertes",
          "üéÅ H√©bergement GRATUIT √Ä VIE"
        ]
      },
      {
        name: "Site Pro",
        price: "√Ä partir de 1800‚Ç¨",
        maintenance: "120‚Ç¨/an",
        desc: "Gestion de contenu autonome via interface simple",
        features: [
          "Formulaires personnalis√©s",
          "Mise √† jour automatique",
          "Multilingue possible",
          "H√©bergement gratuit"
        ]
      }
    ],
    
    ecommerceTitle: "E-commerce",
    ecommerceOptions: [
      {
        name: "Boutique Simple",
        price: "√Ä partir de 3600‚Ç¨",
        maintenance: "400‚Ç¨/an",
        desc: "Jusqu'√† 500 produits, achat rapide sans inscription",
        features: [
          "Paiement Stripe s√©curis√©",
          "Interface admin simple",
          "Panier sauvegard√© sur appareil",
          "H√©bergement gratuit"
        ]
      },
      {
        name: "Boutique Avanc√©e",
        price: "√Ä partir de 5400‚Ç¨",
        maintenance: "920‚Ç¨/an",
        desc: "Produits illimit√©s, comptes clients, dashboard",
        features: [
          "Comptes clients",
          "Dashboard personnalis√©",
          "Synchronisation multi-appareils",
          "Architecture scalable"
        ]
      }
    ],
    
    otherServices: [
      {
        name: "Audit & Optimisation",
        price: "√Ä partir de 800‚Ç¨",
        desc: "Am√©lioration de site existant"
      },
      {
        name: "D√©veloppement Sur-Mesure",
        price: "40‚Ç¨/h",
        desc: "Projet unique adapt√© √† vos besoins"
      }
    ],

    // Avantages
    whyTitle: "Pourquoi √©co-responsable ?",
    whyReasons: [
      "3-10x plus rapide que WordPress",
      "90% moins d'√©nergie consomm√©e",
      "Meilleur r√©f√©rencement Google",
      "3-10x moins cher en maintenance"
    ],

    // Contact
    contactTitle: "Me contacter",
    contactText: "Parlons simplement de votre projet :",
    
    formTitle: "Demander un devis",
    nameLabel: "Nom",
    emailLabel: "Email",
    companyLabel: "Entreprise (optionnel)",
    projectLabel: "Type de projet",
    projectTypes: {
      eternal: "Site √âternel",
      pro: "Site Pro",
      shopSimple: "Boutique Simple",
      shopAdvanced: "Boutique Avanc√©e",
      audit: "Audit",
      custom: "Sur-mesure"
    },
    messageLabel: "Votre projet",
    messagePlaceholder: "D√©crivez votre activit√©, vos besoins, vos objectifs...",
    submitButton: "Envoyer",
    
    note: "Note : Nom de domaine √† votre charge (env. 10-15‚Ç¨/an)"
  },
  en: {
    title: "Josselin HANEL - Services & Pricing (Eco Mode)",
    description: "Eco-friendly version of my services with minimal carbon footprint.",
    pageTitle: "Services & Pricing",
    intro: "High-performance, sustainable websites with little to no recurring fees.",
    
    servicesTitle: "My services",
    
    vitrineTitle: "Showcase Website",
    vitrineOptions: [
      {
        name: "Eternal Site",
        price: "From ‚Ç¨1400",
        maintenance: "‚Ç¨0/year",
        desc: "Immortal pure HTML/CSS site, no maintenance needed",
        features: [
          "3-7 responsive pages",
          "Optimized SEO",
          "2 minor updates/year included",
          "üéÅ FREE HOSTING FOR LIFE"
        ]
      },
      {
        name: "Pro Site",
        price: "From ‚Ç¨1800",
        maintenance: "‚Ç¨120/year",
        desc: "Autonomous content management via simple interface",
        features: [
          "Custom forms",
          "Automatic updates",
          "Multilingual possible",
          "Free hosting"
        ]
      }
    ],
    
    ecommerceTitle: "E-commerce",
    ecommerceOptions: [
      {
        name: "Simple Store",
        price: "From ‚Ç¨3600",
        maintenance: "‚Ç¨400/year",
        desc: "Up to 500 products, quick checkout without registration",
        features: [
          "Secure Stripe payment",
          "Simple admin interface",
          "Cart saved on device",
          "Free hosting"
        ]
      },
      {
        name: "Advanced Store",
        price: "From ‚Ç¨5400",
        maintenance: "‚Ç¨920/year",
        desc: "Unlimited products, customer accounts, dashboard",
        features: [
          "Customer accounts",
          "Personalized dashboard",
          "Multi-device sync",
          "Scalable architecture"
        ]
      }
    ],
    
    otherServices: [
      {
        name: "Audit & Optimization",
        price: "From ‚Ç¨800",
        desc: "Existing site improvement"
      },
      {
        name: "Custom Development",
        price: "‚Ç¨40/h",
        desc: "Unique project adapted to your needs"
      }
    ],

    whyTitle: "Why eco-responsible?",
    whyReasons: [
      "3-10x faster than WordPress",
      "90% less energy consumed",
      "Better Google ranking",
      "3-10x cheaper maintenance"
    ],

    contactTitle: "Contact me",
    contactText: "Let's talk simply about your project:",
    
    formTitle: "Request a quote",
    nameLabel: "Name",
    emailLabel: "Email",
    companyLabel: "Company (optional)",
    projectLabel: "Project type",
    projectTypes: {
      eternal: "Eternal Site",
      pro: "Pro Site",
      shopSimple: "Simple Store",
      shopAdvanced: "Advanced Store",
      audit: "Audit",
      custom: "Custom"
    },
    messageLabel: "Your project",
    messagePlaceholder: "Describe your business, needs, goals...",
    submitButton: "Send",
    
    note: "Note: Domain name at your expense (approx. ‚Ç¨10-15/year)"
  },
  de: {
    title: "Josselin HANEL - Dienstleistungen & Preise (√ñko-Modus)",
    description: "Umweltfreundliche Version meiner Dienstleistungen mit minimalem CO2-Fu√üabdruck.",
    pageTitle: "Dienstleistungen & Preise",
    intro: "Leistungsstarke, nachhaltige Websites mit wenig oder keinen wiederkehrenden Kosten.",
    
    servicesTitle: "Meine Dienstleistungen",
    
    vitrineTitle: "Pr√§sentations-Website",
    vitrineOptions: [
      {
        name: "Ewige Site",
        price: "Ab ‚Ç¨1400",
        maintenance: "‚Ç¨0/Jahr",
        desc: "Unsterbliche reine HTML/CSS-Site, keine Wartung erforderlich",
        features: [
          "3-7 responsive Seiten",
          "Optimiertes SEO",
          "2 kleinere Updates/Jahr inklusive",
          "üéÅ KOSTENLOSES HOSTING AUF LEBENSZEIT"
        ]
      },
      {
        name: "Pro-Site",
        price: "Ab ‚Ç¨1800",
        maintenance: "‚Ç¨120/Jahr",
        desc: "Autonome Inhaltsverwaltung √ºber einfache Oberfl√§che",
        features: [
          "Individuelle Formulare",
          "Automatische Updates",
          "Mehrsprachig m√∂glich",
          "Kostenloses Hosting"
        ]
      }
    ],
    
    ecommerceTitle: "E-Commerce",
    ecommerceOptions: [
      {
        name: "Einfacher Shop",
        price: "Ab ‚Ç¨3600",
        maintenance: "‚Ç¨400/Jahr",
        desc: "Bis zu 500 Produkte, schneller Checkout ohne Registrierung",
        features: [
          "Sichere Stripe-Zahlung",
          "Einfache Admin-Oberfl√§che",
          "Warenkorb auf Ger√§t gespeichert",
          "Kostenloses Hosting"
        ]
      },
      {
        name: "Erweiterter Shop",
        price: "Ab ‚Ç¨5400",
        maintenance: "‚Ç¨920/Jahr",
        desc: "Unbegrenzte Produkte, Kundenkonten, Dashboard",
        features: [
          "Kundenkonten",
          "Personalisiertes Dashboard",
          "Multi-Ger√§te-Sync",
          "Skalierbare Architektur"
        ]
      }
    ],
    
    otherServices: [
      {
        name: "Audit & Optimierung",
        price: "Ab ‚Ç¨800",
        desc: "Verbesserung bestehender Site"
      },
      {
        name: "Ma√ügeschneiderte Entwicklung",
        price: "‚Ç¨40/Std.",
        desc: "Einzigartiges Projekt nach Ihren Bed√ºrfnissen"
      }
    ],

    whyTitle: "Warum umweltfreundlich?",
    whyReasons: [
      "3-10x schneller als WordPress",
      "90% weniger Energieverbrauch",
      "Besseres Google-Ranking",
      "3-10x g√ºnstigere Wartung"
    ],

    contactTitle: "Kontakt",
    contactText: "Lassen Sie uns einfach √ºber Ihr Projekt sprechen:",
    
    formTitle: "Angebot anfordern",
    nameLabel: "Name",
    emailLabel: "E-Mail",
    companyLabel: "Unternehmen (optional)",
    projectLabel: "Projekttyp",
    projectTypes: {
      eternal: "Ewige Site",
      pro: "Pro-Site",
      shopSimple: "Einfacher Shop",
      shopAdvanced: "Erweiterter Shop",
      audit: "Audit",
      custom: "Ma√ügeschneidert"
    },
    messageLabel: "Ihr Projekt",
    messagePlaceholder: "Beschreiben Sie Ihr Gesch√§ft, Bed√ºrfnisse, Ziele...",
    submitButton: "Senden",
    
    note: "Hinweis: Domain-Name auf Ihre Kosten (ca. ‚Ç¨10-15/Jahr)"
  }
} as const;

const t = content[lang] || content.fr;
const redirectUrl = `${Astro.url.origin}/${lang}/contact/thanks/`;
const isEcoMode = true;
---

<Layout
  title={t.title}
  description={t.description}
  lang={lang}
  isEcoMode={isEcoMode}
>
  <div class="container mx-auto px-4 py-6 max-w-3xl">
    <EcoModeInfo lang={lang} />

    <div class="text-center mb-8">
      <h1 class="text-2xl font-bold mb-3">{t.pageTitle}</h1>
      <p class="text-text-muted">{t.intro}</p>
    </div>

    <!-- Services -->
    <section class="mb-8 space-y-6">
      <h2 class="text-xl font-bold mb-4 text-accent border-b border-accent pb-1">
        {t.servicesTitle}
      </h2>
      
      <!-- Site Vitrine -->
      <details class="border border-secondary rounded">
        <summary class="p-3 font-bold cursor-pointer hover:bg-secondary hover:bg-opacity-10 flex">
          <span class="mr-auto ml-0.5">üñ•Ô∏è {t.vitrineTitle}</span>
          <span class="text-accent font-bold">{lang === 'fr' ? '√Ä partir de' : lang === 'en' ? 'From' : 'Ab'} 1400‚Ç¨</span>
        </summary>
        <div class="p-3 pt-0 space-y-3">
          {t.vitrineOptions.map((option) => (
            <div class="border-l-2 border-accent pl-3">
              <strong class="block mb-1">{option.name} - {option.price}</strong>
              <p class="text-accent mb-2">{option.maintenance}</p>
              <p class="mb-2">{option.desc}</p>
              <ul class="space-y-1">
                {option.features.map((f) => (
                  <li class="flex items-start">
                    <span class="mr-2">‚úì</span>
                    <span>{f}</span>
                  </li>
                ))}
              </ul>
            </div>
          ))}
        </div>
      </details>

      <!-- E-commerce -->
      <details class="border border-secondary rounded">
        <summary class="p-3 font-bold cursor-pointer hover:bg-secondary hover:bg-opacity-10 flex">
          <span class="mr-auto ml-0.5">üõí {t.ecommerceTitle}</span>
          <span class="text-accent font-bold">{lang === 'fr' ? '√Ä partir de' : lang === 'en' ? 'From' : 'Ab'} 3600‚Ç¨</span>
        </summary>
        <div class="p-3 pt-0 space-y-3">
          {t.ecommerceOptions.map((option) => (
            <div class="border-l-2 border-accent pl-3">
              <strong class="block mb-1">{option.name} - {option.price}</strong>
              <p class="text-accent mb-2">{option.maintenance}</p>
              <p class="mb-2">{option.desc}</p>
              <ul class="space-y-1">
                {option.features.map((f) => (
                  <li class="flex items-start">
                    <span class="mr-2">‚úì</span>
                    <span>{f}</span>
                  </li>
                ))}
              </ul>
            </div>
          ))}
        </div>
      </details>

      <!-- Autres services -->
      <div class="space-y-2">
        {t.otherServices.map((service) => (
          <div class="border border-secondary p-3 rounded">
            <div class="flex justify-between items-baseline">
              <strong>{service.name}</strong>
              <span class="text-accent font-bold">{service.price}</span>
            </div>
            <p class="text-text-muted">{service.desc}</p>
          </div>
        ))}
      </div>
    </section>

    <!-- Pourquoi √©co -->
    <section class="mb-8 bg-secondary bg-opacity-10 p-4 rounded">
      <h3 class="font-bold mb-3 text-accent">{t.whyTitle}</h3>
      <ul class="space-y-2">
        {t.whyReasons.map((reason) => (
          <li class="flex">
            <span>‚Üí</span>
            <span class="ml-0.5 mt-0.5">{reason}</span>
          </li>
        ))}
      </ul>
    </section>

    <!-- Formulaire -->
    <section>
      <h2 class="text-xl font-bold mb-4 text-accent border-b border-accent pb-1">
        {t.contactTitle}
      </h2>
      <p class="mb-4">{t.contactText}</p>
      
      <form
        action="https://formspree.io/f/mwpklqak"
        method="POST"
        class="space-y-4"
      >
        <input type="hidden" name="_next" value={redirectUrl} />
        
        <div>
          <label for="name" class="block font-medium mb-1">{t.nameLabel}</label>
          <input
            type="text"
            id="name"
            name="name"
            required
            class="w-full px-3 py-2 bg-primary border border-secondary rounded"
          />
        </div>
        
        <div>
          <label for="email" class="block font-medium mb-1">{t.emailLabel}</label>
          <input
            type="email"
            id="email"
            name="email"
            required
            class="w-full px-3 py-2 bg-primary border border-secondary rounded"
          />
        </div>
        
        <div>
          <label for="company" class="block font-medium mb-1">{t.companyLabel}</label>
          <input
            type="text"
            id="company"
            name="company"
            class="w-full px-3 py-2 bg-primary border border-secondary rounded"
          />
        </div>
        
        <div>
          <label for="project" class="block font-medium mb-1">{t.projectLabel}</label>
          <select
            id="project"
            name="project"
            required
            class="w-full px-3 py-2 bg-primary border border-secondary rounded"
          >
            {Object.entries(t.projectTypes).map(([key, value]) => (
              <option value={key}>{value}</option>
            ))}
          </select>
        </div>
        
        <div>
          <label for="message" class="block font-medium mb-1">{t.messageLabel}</label>
          <textarea
            id="message"
            name="message"
            rows="4"
            placeholder={t.messagePlaceholder}
            required
            class="w-full px-3 py-2 bg-primary border border-secondary rounded"
          ></textarea>
        </div>
        
        <button
          type="submit"
          class="w-full bg-accent text-primary font-bold py-2 px-4 rounded hover:opacity-90 transition-opacity"
        >
          {t.submitButton}
        </button>
      </form>
      
      <p class="mt-4 text-text-muted italic">{t.note}</p>
    </section>
  </div>
</Layout>