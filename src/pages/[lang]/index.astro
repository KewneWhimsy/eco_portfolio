---
// Imports
import Layout from "../../layouts/layout.astro";
import { Picture } from "astro:assets";
import monImage from "../../assets/j.jpg";
import objetImage from "../../assets/projects/objet01.png";
import esportImage from "../../assets/projects/esport01.png";
import CtaDispo from "../../components/cta_dispo.astro";

// R√©cup√©rer le param√®tre de langue depuis l'URL
export function getStaticPaths() {
  return [
    { params: { lang: "fr" } },
    { params: { lang: "en" } },
    { params: { lang: "de" } },
  ];
}

const lang = Astro.params.lang as "fr" | "en" | "de";

// Titre et description de la page pour SEO (√† traduire selon la langue)
const content = {
  fr: {
    title: "Josselin HANEL - D√©veloppeur Web Full Stack",
    description: "D√©veloppeur web √©co-responsable sp√©cialis√© dans la cr√©ation de sites et applications performants, modernes et durables. Bas√© √† Rennes, disponible √† Nantes, Paris, Berlin et en t√©l√©travail.",
    heroTitle: "Sites Web <span class='text-light whitespace-nowrap'>Modernes et Performants</span>",
    heroSubtitle: "D√©veloppeur Web Full Stack",
    heroText: "Je con√ßois des sites et applications web qui chargent vite, fonctionnent partout, et optimis√©s pour √™tre bien r√©f√©renc√©s sur Google. Le tout avec une approche √©co-responsable.",
    values: [
      { 
        title: "Performance", 
        description: "Des sites rapides qui offrent une meilleure exp√©rience utilisateur et consomment moins d'√©nergie.",
        emoji: "‚ö°" 
      },
      { 
        title: "Simplicit√©", 
        description: "Des solutions efficaces sans complexit√© inutile, faciles √† maintenir dans le temps.",
        emoji: "‚ú®" 
      },
      { 
        title: "√âco-responsabilit√©", 
        description: "Une conception qui minimise l'empreinte carbone de vos projets web.",
        emoji: "üå±"
      },
      { 
        title: "Autonomie", 
        description: "Des sites que vous pouvez faire √©voluer facilement, sans d√©pendances complexes.",
        emoji: "üöÄ" 
      }
    ],
    projectsButton: "Voir mes projets",
    contactButton: "Me contacter",
    servicesTitle: "Services",
    services: [
      {
        title: "Sites vitrines",
        description: "Sites professionnels personnalis√©s, rapides et optimis√©s pour le r√©f√©rencement - sans WordPress ni abonnements co√ªteux.",
        emoji: "üåê" 
      },
      {
        title: "Applications web",
        description: "Applications interactives sur mesure pour automatiser vos processus et am√©liorer l'exp√©rience de vos utilisateurs.",
        emoji: "‚öôÔ∏è"
      },
      {
        title: "E-commerce",
        description: "Solutions e-commerce modernes et performantes, sans les frais mensuels des plateformes traditionnelles.",
        emoji: "üõí"
      },
      {
        title: "Consultation",
        description: "Conseils en √©co-conception web, optimisation de performance et audit de sites existants.",
        emoji: "üí°"
      }
    ],
    projectsTitle: "Projets r√©cents",
    projectButton: "D√©couvrir le projet",
    viewAllProjectsButton: "Voir tous les projets",
  },
  en: {
    title: "Josselin HANEL - Full Stack Web Developer",
    description: "Eco-friendly web developer specialized in creating high-performance, modern and sustainable websites and applications. Based in Rennes(France), available in Nantes, Paris, Berlin and remote work.",
    heroTitle: "<span class='text-light whitespace-nowrap'>Modern and Performant</span> Websites",
    heroSubtitle: "Full Stack Web Developer",
    heroText: "I design websites and web applications that load quickly, work everywhere, and are optimized for good Google rankings. All with an eco-friendly approach.",
    values: [
      { 
        title: "Performance", 
        description: "Fast websites that offer a better user experience and consume less energy.",
        emoji: "‚ö°"
      },
      { 
        title: "Simplicity", 
        description: "Effective solutions without unnecessary complexity, easy to maintain over time.",
        emoji: "‚ú®" 
      },
      { 
        title: "Eco-responsibility", 
        description: "Design that minimizes the carbon footprint of your web projects.",
        emoji: "üå±"
      },
      { 
        title: "Autonomy", 
        description: "Websites that you can easily evolve, without complex dependencies.",
        emoji: "üöÄ" 
      }
    ],
    projectsButton: "View my projects",
    contactButton: "Contact me",
    servicesTitle: "Services",
    services: [
      {
        title: "Showcase websites",
        description: "Personalized, fast, and SEO-optimized professional websites - without WordPress or costly subscriptions.",
        emoji: "üåê"
      },
      {
        title: "Web applications",
        description: "Custom interactive applications to automate your processes and improve your users' experience.",
        emoji: "‚öôÔ∏è"
      },
      {
        title: "E-commerce",
        description: "Modern and high-performance e-commerce solutions, without the monthly fees of traditional platforms.",
        emoji: "üõí"
      },
      {
        title: "Consultation",
        description: "Web eco-design advice, performance optimization, and auditing of existing sites.",
        emoji: "üí°"
      }
    ],
    projectsTitle: "Recent projects",
    projectButton: "Explore project",
    viewAllProjectsButton: "View all projects",
  },
  de: {
    title: "Josselin HANEL - Full-Stack Webentwickler",
    description: "Umweltfreundlicher Webentwickler, spezialisiert auf die Erstellung leistungsstarker, moderner und nachhaltiger Websites und Anwendungen. Mit Sitz in Rennes(Frankreich) und verf√ºgbar in Nantes, Paris, Berlin und f√ºr Remote-Arbeit.",
    heroTitle: "<span class='text-light whitespace-nowrap'>Moderne und Leistungsstarke</span> Webseiten",
    heroSubtitle: "Full-Stack Webentwickler",
    heroText: "Ich entwickle Websites und Webanwendungen, die schnell laden, √ºberall funktionieren und f√ºr gute Google-Rankings optimiert sind. Alles mit einem umweltfreundlichen Ansatz.",
    values: [
      { 
        title: "Leistung", 
        description: "Schnelle Websites, die ein besseres Benutzererlebnis bieten und weniger Energie verbrauchen.",
        emoji: "‚ö°"
      },
      { 
        title: "Einfachheit", 
        description: "Effektive L√∂sungen ohne unn√∂tige Komplexit√§t, die langfristig leicht zu warten sind.",
        emoji: "‚ú®"
      },
      { 
        title: "Umweltverantwortung", 
        description: "Ein Design, das den CO2-Fu√üabdruck Ihrer Webprojekte minimiert.",
        emoji: "üå±"
      },
      { 
        title: "Autonomie", 
        description: "Websites, die Sie leicht weiterentwickeln k√∂nnen, ohne komplexe Abh√§ngigkeiten.",
        emoji: "üöÄ"
      }
    ],
    projectsButton: "Meine Projekte",
    contactButton: "Kontakt",
    servicesTitle: "Dienstleistungen",
    services: [
      {
        title: "Showcase-Websites",
        description: "Personalisierte, schnelle und SEO-optimierte professionelle Websites - ohne WordPress oder kostspielige Abonnements.",
        emoji: "üåê"
      },
      {
        title: "Webanwendungen",
        description: "Ma√ügeschneiderte interaktive Anwendungen zur Automatisierung Ihrer Prozesse und Verbesserung der Benutzererfahrung.",
        emoji: "‚öôÔ∏è"
      },
      {
        title: "E-Commerce",
        description: "Moderne und leistungsstarke E-Commerce-L√∂sungen ohne monatliche Geb√ºhren traditioneller Plattformen.",
        emoji: "üõí"
      },
      {
        title: "Beratung",
        description: "Beratung f√ºr Web-√ñko-Design, Leistungsoptimierung und Audit bestehender Websites.",
        emoji: "üí°"
      }
    ],
    projectsTitle: "Aktuelle Projekte",
    projectButton: "Projekt entdecken",
    viewAllProjectsButton: "Alle Projekte ansehen",
  },
};

// Utiliser la langue demand√©e ou fran√ßais par d√©faut
const t = content[lang] || content.fr;

// Projets √† mettre en avant
const featuredProjects = [
  {
    title:
      lang === "fr"
        ? "Application e-sport avec chat (2025)"
        : lang === "en"
          ? "E-sport Application with Chat (2025)"
          : "E-Sport-Anwendung mit Chat (2025)",
    description:
      lang === "fr"
        ? "Plateforme de gestion d'√©v√©nements e-sport int√©grant un syst√®me de chat en temps r√©el via WebSocket et HTMX. (entreprise fictive)"
        : lang === "en"
          ? "E-sport event management platform with a real-time chat system via WebSocket and HTMX. (fictional company)"
          : "E-Sport-Eventmanagement-Plattform mit einem Echtzeit-Chat-System √ºber WebSocket und HTMX. (fiktives Unternehmen)",
    image: esportImage,
    tech: [
      "Astro",
      "Tailwind",
      "CSS Pro",
      "Alpine.js",
      "HTMX",
      "WebSocket",
      "Express",
      "Postgresql",
      "MongoDB",
    ],
    url: `/${lang}/esport`,
  },
  {
    title:
      lang === "fr"
        ? "Biblioth√®que d'objets - Quimper (2024)"
        : lang === "en"
          ? "Object Library - Quimper (2024)"
          : "Objektbibliothek - Quimper (2024)",
    description:
      lang === "fr"
        ? "Con√ßu en collaboration avec <a href='https://jadephom.myportfolio.com/' target='_blank' class='text-jade'>Jade Ounaphom</a>, cr√©atrice audiovisuelle, le site met en avant le fonctionnement de la biblioth√®que d'objets et ses actualit√©s."
        : lang === "en"
          ? "Designed in collaboration with <a href='https://jadephom.myportfolio.com/' target='_blank' class='text-jade'>Jade Ounaphom</a>, audiovisual creator, the website highlights how the object library works and its news."
          : "In Zusammenarbeit mit <a href='https://jadephom.myportfolio.com/' target='_blank' class='text-jade'>Jade Ounaphom</a>, audiovisuelle Gestalterin, pr√§sentiert die Website die Funktionsweise der Objektbibliothek und ihre Neuigkeiten.",
    image: objetImage,
    tech: [
      "Astro",
      "CSS Pro", 
      "TypeScript",
      "Alpine.js",
      "GitHub Actions",
    ],
    url: `/${lang}/objet`,
  },
];
---

<Layout title={t.title} description={t.description} lang={lang}>
  <div class="container md:mt-3 mt-0 mx-auto px-4 md:py-8 py-0">
    <!-- Section hero repens√©e avec l'animation de typewriter -->
    <section class="py-8 md:py-12">
      <div class="flex flex-col md:flex-row gap-8">
        <div class="md:w-2/3">
          <p class="text-accent mb-2 font-medium">{t.heroSubtitle}</p>
          <h1 class="text-3xl md:text-4xl font-bold mb-4">
            <div class="flex flex-wrap items-baseline gap-2">
              <div class="typewriter-part1">
                <span class="typewriter-text-base">
                  {lang === "fr" 
                    ? "Sites Web"
                    : lang === "en" 
                      ? "Modern" 
                      : "Moderne"
                  }
                </span>
              </div>
              <div class="typewriter-part2">
                <span class="typewriter-text-highlight text-light">
                  {lang === "fr" 
                    ? "Modernes et Performants"
                    : lang === "en" 
                      ? "& Performant Websites" 
                      : "& Leistungsstarke Webseiten"
                  }
                </span>
              </div>
            </div>
          </h1>
          <p class="text-lg mb-6">
            {t.heroText}
          </p>
          <div class="flex flex-wrap gap-4">
            <a href={`/${lang}/contact`} class="cta-button">
              {t.contactButton}
            </a>
            <a href={`/${lang}/projects`} class="btn-secondary">
              {t.projectsButton}
            </a>
          </div>
        </div>
        <div class="md:w-1/3">
          <div class="bg-secondary rounded-lg p-4">
            <Picture
              src={monImage}
              widths={[400, 600]}
              formats={["avif", "webp", "jpg"]}
              alt={`Josselin HANEL - ${lang === "fr" ? "D√©veloppeur Full Stack" : lang === "en" ? "Full Stack Developer" : "Full-Stack-Entwickler"}`}
              class="w-full h-auto object-cover rounded"
              data-astro-transition-persist="profile-image"
            />
          </div>
        </div>
      </div>
    </section>

    <!-- Section valeurs principales -->
    <section class="py-4 bg-secondary bg-opacity-30 rounded-lg mb-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
          {t.values.map((value) => (
            <div class="p-4 border border-accent border-opacity-30 rounded-lg">
              <div class="flex justify-between items-center mb-2">
                <h3 class="text-xl font-semibold text-accent">{value.title}</h3>
                <span class="text-2xl">{value.emoji}</span>
              </div>
              <p>{value.description}</p>
            </div>
          ))}
        </div>
      </div>
    </section>

    <!-- Section services -->
    <section class="py-8 mb-12">
      <h2 class="text-2xl font-bold mb-6 border-b border-accent pb-2">
        {t.servicesTitle}
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        {t.services.map((service) => (
          <div class="bg-secondary bg-opacity-30 p-5 rounded-lg">
            <div class="flex justify-between items-center mb-3">
              <h3 class="text-xl font-semibold text-accent">{service.title}</h3>
              <span class="text-2xl">{service.emoji}</span>
            </div>
            <p>{service.description}</p>
          </div>
        ))}
      </div>
    </section>

    <!-- Section projets en vedette -->
    <section class="py-8">
      <h2 class="text-2xl font-bold mb-6 border-b border-accent pb-2">
        {t.projectsTitle}
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        {
          featuredProjects.map((project) => (
          <div class="project-card w-full">
            <!-- Image du projet -->
            <div class="bg-primary bg-opacity-30 aspect-video w-full">
              <Picture
                src={project.image}
                widths={[400, 740, 1080]}
                sizes="(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw"
                formats={["avif", "webp", "jpg"]}
                alt={project.title}
                class="w-full h-full object-cover"
                loading="lazy"
              />
            </div>
            
            <!-- Contenu du projet -->
            <div class="p-4 flex flex-col h-full">
              <div class="flex-1">
                <h3 class="text-xl font-bold mb-2">{project.title}</h3>
                <p class="mb-4" set:html={project.description}></p>
                
                <!-- Technologies compl√®tes comme demand√© -->
                <div class="mb-4">
                  <div class="flex flex-wrap gap-1.5">
                    {project.tech.map((tech) => (
                      <span class="px-2 py-0.5 border border-accent text-light rounded-full text-xs">
                        {tech}
                      </span>
                    ))}
                  </div>
                </div>
              </div>
              
              <!-- Boutons -->
              <div class="mt-auto">
                <div class="flex gap-3">
                  <a href={project.url} class="btn-secondary flex-1 text-center">
                    {t.projectButton}
                  </a>
                </div>
              </div>
            </div>
          </div>
          ))
        }
      </div>
      <div class="text-center mt-8">
        <a
          href={`/${lang}/projects`}
          style="
            display: inline-block;
            padding: 8px 16px;
            background-color: transparent;
            border: 1px solid var(--color-accent);
            color: var(--color-accent);
            border-radius: 4px;
            transition: transform 0.3s ease, background-color 0.3s ease, color 0.3s ease;
          "
          onmouseover="this.style.transform='translateY(-1px)'; this.style.backgroundColor='rgba(77, 163, 77, 0.1)'; this.style.color='var(--color-text)';"
          onmouseout="this.style.transform='translateY(0)'; this.style.backgroundColor='transparent'; this.style.color='var(--color-accent)';"
        >
          {t.viewAllProjectsButton}
        </a>
      </div>
    </section>

    <!-- Section appel √† l'action -->
    <section>
      <CtaDispo transition-persist="cta-dispo"/>
    </section>
  </div>
</Layout>