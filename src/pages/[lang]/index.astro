---
// Imports
import Layout from "../../layouts/layout.astro";
import { Picture } from "astro:assets";
import monImage from "../../assets/j.jpg";
import objetImage from "../../assets/projects/objet01.png";
import esportImage from "../../assets/projects/esport01.png";
import CtaDispo from "../../components/cta_dispo.astro";

// R√©cup√©rer le param√®tre de langue depuis l'URL
export function getStaticPaths() {
  return [
    { params: { lang: "fr" } },
    { params: { lang: "en" } },
    { params: { lang: "de" } },
  ];
}

const lang = Astro.params.lang as "fr" | "en" | "de";

// Titre et description de la page pour SEO (√† traduire selon la langue)
const content = {
  fr: {
    title: "Josselin HANEL - D√©veloppeur Web Full Stack",
    description:
      "Portfolio de d√©veloppeur web full stack avec une approche √©co-responsable, bas√© √† Rennes, disponible √† Nantes, Paris, Berlin et en t√©l√©travail.",
    heroTitle: 'D√©veloppeur Web <span class="text-light whitespace-nowrap">Full Stack</span>',
    heroText:
      "Je con√ßois des sites web et applications compl√®tes, durables et performantes, en privil√©giant des solutions √©conomes en ressources.",
    projectsButton: "Voir mes projets",
    contactButton: "Me contacter",
    skillsTitle: "Comp√©tences",
    projectsTitle: "Projets r√©cents",
    projectButton: "D√©couvrir le projet",
    viewAllProjectsButton: "Voir tous les projets",
  },
  en: {
    title: "Josselin HANEL - Full Stack Web Developer",
    description:
      "Portfolio of a full stack web developer with an eco-friendly approach, based in Rennes(France), available in Nantes, Paris, Berlin and remote work.",
    heroTitle: 'Full Stack <span class="text-light whitespace-nowrap">Web Developer</span>',
    heroText:
      "I design complete, sustainable and high-performance websites and applications, prioritizing resource-efficient solutions.",
    projectsButton: "View my projects",
    contactButton: "Contact me",
    skillsTitle: "Skills",
    projectsTitle: "Recent projects",
    projectButton: "Explore project",
    viewAllProjectsButton: "View all projects",
  },
  de: {
    title: "Josselin HANEL - Full-Stack Webentwickler",
    description:
      "Portfolio eines Full-Stack-Webentwicklers mit umweltfreundlichem Ansatz, mit Sitz in Rennes(Frankreich) und verf√ºgbar Nantes, Paris, Berlin und f√ºr Remote-Arbeit.",
    heroTitle: 'Full-Stack <span class="text-light">Webentwickler</span>',
    heroText:
      "Ich entwickle vollst√§ndige, nachhaltige und leistungsstarke Websites und Anwendungen mit ressourcenschonenden L√∂sungen.",
    projectsButton: "Meine Projekte",
    contactButton: "Kontakt",
    skillsTitle: "F√§higkeiten",
    projectsTitle: "Aktuelle Projekte",
    projectButton: "Projekt entdecken",
    viewAllProjectsButton: "Alle Projekte ansehen",
  },
};

// Utiliser la langue demand√©e ou fran√ßais par d√©faut
const t = content[lang] || content.fr;

// Comp√©tences √† afficher avec traductions
const skills = [
  {
    category: "Frontend",
    emoji: "üñ•Ô∏è", 
    items: ["Astro", "CSS Pro", "Tailwind", "TypeScript", "HTMX", "Alpine.js"],
  },
  {
    category: "Backend",
    emoji: "‚öôÔ∏è", 
    items: ["Express", "WebSocket", "Elixir", "Phoenix"],
  },
  {
    category:
      lang === "fr"
        ? "Bases de donn√©es"
        : lang === "en"
          ? "Databases"
          : "Datenbanken",
    emoji: "üóÑÔ∏è", 
    items: ["PostgreSQL", "MongoDB", "PostgREST", "Ecto"],
  },
  {
    category: lang === "fr" ? "Outils" : lang === "en" ? "Tools" : "Werkzeuge",
    emoji: "üõ†Ô∏è", 
    items: ["Git", "Docker", "VS Code", "Lighthouse"],
  },
  {
    category:
      lang === "fr"
        ? "M√©thodologies"
        : lang === "en"
          ? "Methodologies"
          : "Methoden",
    emoji: "üìê", 
    items: [
      lang === "fr"
        ? "Accessibilit√©"
        : lang === "en"
          ? "Accessibility"
          : "Barrierefreiheit",
      "Performance",
      lang === "fr"
        ? "√âco-conception"
        : lang === "en"
          ? "Eco-design"
          : "√ñko-Design",
      "UX/UI",
    ],
  },
];

// Projets √† mettre en avant
const featuredProjects = [
  {
    title:
      lang === "fr"
        ? "Application e-sport avec chat (2025)"
        : lang === "en"
          ? "E-sport Application with Chat (2025)"
          : "E-Sport-Anwendung mit Chat (2025)",
    description:
      lang === "fr"
        ? "Plateforme de gestion d'√©v√©nements e-sport int√©grant un syst√®me de chat en temps r√©el via WebSocket et HTMX. (entreprise fictive)"
        : lang === "en"
          ? "E-sport event management platform with a real-time chat system via WebSocket and HTMX. (fictional company)"
          : "E-Sport-Eventmanagement-Plattform mit einem Echtzeit-Chat-System √ºber WebSocket und HTMX. (fiktives Unternehmen)",
    image: esportImage,
    tech: [
      "Astro",
      "Tailwind",
      "CSS Pro",
      "Alpine.js",
      "HTMX",
      "WebSocket",
      "Express",
      "Postgresql",
      "MongoDB",
    ],
    url: `/${lang}/esport`,
  },
  {
    title:
      lang === "fr"
        ? "Biblioth√®que d'objets - Quimper (2024)"
        : lang === "en"
          ? "Object Library - Quimper (2024)"
          : "Objektbibliothek - Quimper (2024)",
    description:
      lang === "fr"
        ? "Con√ßu en collaboration avec <a href='https://jadephom.myportfolio.com/' target='_blank' class='text-jade'>Jade Ounaphom</a>, cr√©atrice audiovisuelle, le site met en avant le fonctionnement de la biblioth√®que d'objets et ses actualit√©s."
        : lang === "en"
          ? "Designed in collaboration with <a href='https://jadephom.myportfolio.com/' target='_blank' class='text-jade'>Jade Ounaphom</a>, audiovisual creator, the website highlights how the object library works and its news."
          : "In Zusammenarbeit mit <a href='https://jadephom.myportfolio.com/' target='_blank' class='text-jade'>Jade Ounaphom</a>, audiovisuelle Gestalterin, pr√§sentiert die Website die Funktionsweise der Objektbibliothek und ihre Neuigkeiten.",
    image: objetImage,
    tech: [
      "Astro",
      "CSS Pro", 
      "TypeScript",
      "Alpine.js",
      "GitHub Actions",
    ],
    url: `/${lang}/objet`,
  },
];
---

<Layout title={t.title} description={t.description} lang={lang}>
  <div class="container md:mt-3 mt-0 mx-auto px-4 md:py-8 py-0">
    <!-- Section hero -->
    <section class="py-8 md:py-12">
      <div class="flex flex-col md:flex-row gap-8">
        <div class="md:w-2/3">
          <h1 class="text-2xl sm:text-3xl md:text-4xl font-bold mb-4">
            <div class="typewriter-wrapper">
              <span class="typewriter-text">
                {lang === "fr" 
                  ? <>D√©veloppeur Web <span class="highlight">Full Stack</span></>
                  : lang === "en" 
                    ? <>Full Stack <span class="highlight">Web Developer</span></> 
                    : <>Full-Stack <span class="highlight">Webentwickler</span></>
                }
              </span>
            </div>
          </h1>
          <p class="text-lg mb-6">
            {t.heroText}
          </p>
          <div class="flex flex-wrap gap-4">
            <a href={`/${lang}/projects`} class="cta-button">
              {t.projectsButton}
            </a>
            <a href={`/${lang}/contact`} class="btn-secondary">
              {t.contactButton}
            </a>
          </div>
        </div>
        <div class="md:w-1/3">
          <div class="bg-secondary rounded-lg p-4">
            <Picture
              src={monImage}
              widths={[400, 600]}
              formats={["avif", "webp", "jpg"]}
              alt={`Josselin HANEL - ${lang === "fr" ? "D√©veloppeur Full Stack" : lang === "en" ? "Full Stack Developer" : "Full-Stack-Entwickler"}`}
              class="w-full h-auto object-cover rounded"
              data-astro-transition-persist="profile-image"
            />
          </div>
        </div>
      </div>
    </section>

    <!-- Section comp√©tences -->
    <section class="py-8">
      <h2 class="text-2xl font-bold mb-6 border-b border-accent pb-2">
        {t.skillsTitle}
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        {
          skills.map((skill) => (
            <div class="bg-secondary bg-opacity-30 p-4 rounded-lg">
              <div class="flex justify-between items-center mb-3">
                <h3 class="text-lg font-semibold text-light">
                  {skill.category}
                </h3>
                <span class="text-xl">
                  {skill.emoji}
                </span>
              </div>
              <div class="flex flex-wrap gap-2">
                {skill.items.map((item) => (
                  <span class="px-2 py-1 bg-secondary rounded-full text-sm">
                    {item}
                  </span>
                ))}
              </div>
            </div>
          ))
        }
      </div>
    </section>

    <!-- Section projets en vedette -->
    <section class="py-8">
      <h2 class="text-2xl font-bold mb-6 border-b border-accent pb-2">
        {t.projectsTitle}
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        {
          featuredProjects.map((project) => (
          <div class="project-card w-full">
  <!-- Image du projet -->
  <div class="bg-primary bg-opacity-30 aspect-video w-full">
    <Picture
      src={project.image}
      widths={[400, 740, 1080]}
      sizes="(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw"
      formats={["avif", "webp", "jpg"]}
      alt={project.title}
      class="w-full h-full object-cover"
      loading="lazy"
    />
  </div>
  
  <!-- Contenu du projet (prendra l'espace variable) -->
  <div class="p-4 flex flex-col h-full">
    <div class="flex-1">
      <h3 class="text-xl font-bold mb-2">{project.title}</h3>
      <p class="mb-4" set:html={project.description}></p>
      
      <!-- Technologies -->
      <div class="mb-4">
        <div class="flex flex-wrap gap-1.5">
          {project.tech.map((tech) => (
            <span class="px-2 py-0.5 border border-accent text-light rounded-full text-xs">
              {tech}
            </span>
          ))}
        </div>
      </div>
    </div>
    
    <!-- Boutons (toujours au bas de la carte) -->
    <div class="mt-auto">
      <div class="flex gap-3">
        <a href={project.url} class="btn-secondary flex-1 text-center">
          {t.projectButton}
        </a>
      </div>
    </div>
  </div>
</div>
          ))
        }
      </div>
      <div class="text-center mt-8">
        <!-- Bouton autonome complet avec changement de couleur de texte -->
        <a
          href={`/${lang}/projects`}
          style="
            display: inline-block;
            padding: 8px 16px;
            background-color: transparent;
            border: 1px solid var(--color-accent);
            color: var(--color-accent);
            border-radius: 4px;
            transition: transform 0.3s ease, background-color 0.3s ease, color 0.3s ease;
          "
          onmouseover="this.style.transform='translateY(-1px)'; this.style.backgroundColor='rgba(77, 163, 77, 0.1)'; this.style.color='var(--color-text)';"
          onmouseout="this.style.transform='translateY(0)'; this.style.backgroundColor='transparent'; this.style.color='var(--color-accent)';"
        >
          {t.viewAllProjectsButton}
        </a>
      </div>
    </section>

    <!-- Section appel √† l'action -->
    <section>
      <CtaDispo transition-persist="cta-dispo"/>
    </section>
  </div>
</Layout>
