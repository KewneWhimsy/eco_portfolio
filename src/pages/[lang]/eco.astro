---
// Imports
import Layout from "../../layouts/layout.astro";
import { Picture } from 'astro:assets';
import monImage from "../../assets/j.jpg";
import CtaDispo from "../../components/cta_dispo.astro";
import objetImage from "../../assets/projects/objet01.png";
import esportImage from "../../assets/projects/esport01.png";

// Récupérer le paramètre de langue depuis l'URL
export function getStaticPaths() {
  return [
    { params: { lang: "fr" } },
    { params: { lang: "en" } },
    { params: { lang: "de" } },
  ];
}

const lang = Astro.params.lang as "fr" | "en" | "de";

// Titre et description de la page pour SEO (à traduire selon la langue)
const content = {
  fr: {
    title: "Josselin HANEL - Créateur de sites internet (Mode Éco)",
    description:
      "Version éco-responsable de mon portfolio de créateur de sites internet, avec une empreinte carbone minimale.",
    heroTitle:
      "Créateur de <span class='text-light whitespace-nowrap'>sites internet</span>",
    heroText:
      "Je crée des sites qui chargent vite, s'affichent correctement sur tous les appareils, et sont bien placés sur Google. Le tout avec un souci d'économie d'énergie.",
    projectsButton: "Voir mes réalisations",
    contactButton: "Me contacter",
    ecoModeTitle: "Mode Éco activé",
    ecoModeText:
      "Vous consultez actuellement la version ultra-légère de mon portfolio.",
    servicesTitle: "Services",
    services: [
      {
        title: "Sites pour présenter votre activité",
        description:
          "Sites professionnels personnalisés, rapides et bien placés sur Google - sans WordPress ni abonnements coûteux.",
        hasQuote: true,
        quoteLink: `/${lang}/quote_presentation/eco/`
      },
      {
        title: "Applications web",
        description:
          "Outils en ligne sur mesure pour automatiser vos tâches et améliorer l'expérience de vos utilisateurs.",
      },
      {
        title: "Boutiques en ligne",
        description:
          "Solutions de vente en ligne modernes et rapides, sans les frais mensuels des plateformes habituelles.",
      },
      {
        title: "Conseils",
        description:
          "Conseils pour rendre vos sites existants plus rapides, moins énergivores et plus agréables à utiliser.",
      },
    ],
    values: [
      {
        title: "Rapidité",
        description:
          "Des sites qui ne font pas attendre vos visiteurs et qui consomment moins de batterie.",
      },
      {
        title: "Simplicité",
        description:
          "Des solutions qui vont droit au but, sans gadgets inutiles, faciles à mettre à jour.",
      },
      {
        title: "Économie d'énergie",
        description:
          "Des sites plus légers qui respectent la planète et font baisser vos factures d'hébergement.",
      },
      {
        title: "Autonomie",
        description:
          "Des sites que vous pouvez faire évoluer facilement, sans dépendre constamment d'un prestataire.",
      },
    ],
    projectsTitle: "Projets récents",
    projectButton: "Voir ce projet",
    viewAllProjectsButton: "Voir tous les projets",
    projects: {
      esport: {
        title: "Application e-sport avec chat (2025)",
        description:
          "Plateforme de gestion d'événements e-sport intégrant un système de chat en temps réel via WebSocket et HTMX.",
        techs: "Astro, HTMX, WebSocket, Express, PostgreSQL",
      },
      library: {
        title: "Bibliothèque d'objets - Quimper (2024)",
        description:
          "Site vitrine pour une bibliothèque d'objets associative, conçu en collaboration avec une créatrice audiovisuelle.",
        techs: "Astro, Alpine.js, TypeScript, GitHub Actions",
      },
    },
    imageAlt: "Photo de Josselin HANEL",
    motivationTitle: "Ce qui me motive",
    motivationIntro:
      "Je crois à un web qui allie rapidité, simplicité et respect de l'environnement. Aujourd'hui, trop de sites sont lourds, lents à charger et consomment beaucoup d'énergie. Ma démarche s'appuie sur ces principes :",
    motivationPrinciples: [
      {
        title: "La bonne technique au bon endroit",
        description:
          "Les navigateurs modernes peuvent faire beaucoup de choses sans avoir besoin d'installer des tonnes de modules supplémentaires. J'utilise les technologies existantes de manière intelligente pour créer des sites fluides qui ne rament pas."
      },
      {
        title: "Le respect du visiteur",
        description:
          "Pas de fenêtres pop-up agaçantes ni de bandeaux qui gênent la navigation. Une expérience agréable où l'utilisateur reste maître de sa navigation et de ses données."
      },
      {
        title: "La performance bien pensée",
        description:
          "Chaque élément a sa raison d'être, et chaque effet visuel est fait pour ne pas ralentir le site. Résultat : des sites à la fois beaux, rapides et économes en ressources."
      },
      {
        title: "Un mode économie quand c'est utile",
        description:
          "Ce site propose un mode économie qui permet d'y accéder même avec une connexion limitée. Si cette approche n'est pas idéale pour tous les projets (surtout ceux avec beaucoup d'images), elle devrait être plus répandue pour les services essentiels et sites d'information."
      }
    ],
  },
  en: {
    title: "Josselin HANEL - Web Developer (Eco Mode)",
    description:
      "Eco-friendly version of my full stack developer portfolio, with minimal carbon footprint.",
    heroTitle:
      "<span class='text-light whitespace-nowrap'>Full Stack</span> Web Developer",
    heroText:
      "I design websites and web applications that load quickly, work everywhere, and are optimized for good Google rankings. All with an eco-friendly approach.",
    projectsButton: "View my projects",
    contactButton: "Contact me",
    ecoModeTitle: "Eco Mode activated",
    ecoModeText:
      "You are currently viewing the ultra-lightweight version of my portfolio.",
    servicesTitle: "Services",
    services: [
      {
        title: "Showcase websites",
        description:
          "Personalized, fast, and SEO-optimized professional websites - without WordPress or costly subscriptions.",
        hasQuote: true, // Propriété pour identifier que ce service a un formulaire de devis
        quoteLink: `/${lang}/quote_presentation/eco/`
      },
      {
        title: "Web applications",
        description:
          "Custom interactive applications to automate your processes and improve your users' experience.",
      },
      {
        title: "E-commerce",
        description:
          "Modern and high-performance e-commerce solutions, without the monthly fees of traditional platforms.",
      },
      {
        title: "Consultation",
        description:
          "Web eco-design advice, performance optimization, and auditing of existing sites.",
      },
    ],
    values: [
      {
        title: "Performance",
        description:
          "Fast websites that offer a better user experience and consume less energy.",
      },
      {
        title: "Simplicity",
        description:
          "Effective solutions without unnecessary complexity, easy to maintain over time.",
      },
      {
        title: "Eco-responsibility",
        description:
          "Design that minimizes the carbon footprint of your web projects.",
      },
      {
        title: "Autonomy",
        description:
          "Websites that you can easily evolve, without complex dependencies.",
      },
    ],
    projectsTitle: "Recent projects",
    projectButton: "View project",
    viewAllProjectsButton: "View all projects",
    projects: {
      esport: {
        title: "E-sport Application with Chat (2025)",
        description:
          "E-sport event management platform with a real-time chat system via WebSocket and HTMX.",
        techs: "Astro, HTMX, WebSocket, Express, PostgreSQL",
      },
      library: {
        title: "Object Library - Quimper (2024)",
        description:
          "Showcase website for a community object library, designed in collaboration with an audiovisual creator.",
        techs: "Astro, Alpine.js, TypeScript, GitHub Actions",
      },
    },
    imageAlt: "Photo of Josselin HANEL",
    motivationTitle: "What drives me",
    motivationIntro:
      "I believe in a web that combines performance, elegance, and environmental respect. My approach revolves around these principles:",
    motivationPrinciples: [
      {
        title: "Technical intelligence",
        description:
          "Core web technologies have evolved significantly in recent years, but many companies and developers continue to use heavy libraries out of habit. I prefer to leverage modern browser capabilities to create visual effects and smooth interactions without compromising speed.",
      },
      {
        title: "Respect for users",
        description:
          "No intrusive popups or unnecessary banners that interrupt browsing. A smooth experience where users remain in control of their navigation and their data.",
      },
      {
        title: "Thoughtful performance",
        description:
          "Each design element has its purpose, and each visual effect is implemented optimally. The result: websites that are aesthetic, fast, and resource-efficient at the same time.",
      },
      {
        title: "Eco mode where it matters",
        description:
          "This portfolio offers an eco mode that provides access to content even with limited connectivity. While this approach isn't relevant for all projects (particularly visual ones), it should be more widespread for essential services and information websites.",
      },
    ],
  },
  de: {
    title: "Josselin HANEL - Webentwickler (Öko-Modus)",
    description:
      "Umweltfreundliche Version meines Full-Stack-Entwickler-Portfolios mit minimalem CO2-Fußabdruck.",
    heroTitle:
      "<span class='text-light whitespace-nowrap'>Full-Stack</span> Webentwickler",
    heroText:
      "Ich entwickle Websites und Webanwendungen, die schnell laden, überall funktionieren und für gute Google-Rankings optimiert sind. Alles mit einem umweltfreundlichen Ansatz.",
    projectsButton: "Meine Projekte",
    contactButton: "Kontakt",
    ecoModeTitle: "Öko-Modus aktiviert",
    ecoModeText:
      "Sie sehen gerade die ultraleichte Version meines Portfolios.",
    servicesTitle: "Dienstleistungen",
    services: [
      {
        title: "Showcase-Websites",
        description:
          "Personalisierte, schnelle und SEO-optimierte professionelle Websites - ohne WordPress oder kostspielige Abonnements.",
        hasQuote: true, // Propriété pour identifier que ce service a un formulaire de devis
        quoteLink: `/${lang}/quote_presentation/eco/`
      },
      {
        title: "Webanwendungen",
        description:
          "Maßgeschneiderte interaktive Anwendungen zur Automatisierung Ihrer Prozesse und Verbesserung der Benutzererfahrung.",
      },
      {
        title: "E-Commerce",
        description:
          "Moderne und leistungsstarke E-Commerce-Lösungen ohne monatliche Gebühren traditioneller Plattformen.",
      },
      {
        title: "Beratung",
        description:
          "Beratung für Web-Öko-Design, Leistungsoptimierung und Audit bestehender Websites.",
      },
    ],
    values: [
      {
        title: "Leistung",
        description:
          "Schnelle Websites, die ein besseres Benutzererlebnis bieten und weniger Energie verbrauchen.",
      },
      {
        title: "Einfachheit",
        description:
          "Effektive Lösungen ohne unnötige Komplexität, die langfristig leicht zu warten sind.",
      },
      {
        title: "Umweltverantwortung",
        description:
          "Ein Design, das den CO2-Fußabdruck Ihrer Webprojekte minimiert.",
      },
      {
        title: "Autonomie",
        description:
          "Websites, die Sie leicht weiterentwickeln können, ohne komplexe Abhängigkeiten.",
      },
    ],
    projectsTitle: "Aktuelle Projekte",
    projectButton: "Projekt ansehen",
    viewAllProjectsButton: "Alle Projekte ansehen",
    projects: {
      esport: {
        title: "E-Sport-Anwendung mit Chat (2025)",
        description:
          "E-Sport-Eventmanagement-Plattform mit einem Echtzeit-Chat-System über WebSocket und HTMX.",
        techs: "Astro, HTMX, WebSocket, Express, PostgreSQL",
      },
      library: {
        title: "Objektbibliothek - Quimper (2024)",
        description:
          "Schaufenster-Website für eine gemeinschaftliche Objektbibliothek, gestaltet in Zusammenarbeit mit einer audiovisuellen Designerin.",
        techs: "Astro, Alpine.js, TypeScript, GitHub Actions",
      },
    },
    imageAlt: "Foto von Josselin HANEL",
    motivationTitle: "Was mich antreibt",
    motivationIntro:
      "Ich glaube an ein Web, das Leistung, Eleganz und Umweltbewusstsein vereint. Mein Ansatz beruht auf diesen Prinzipien:",
    motivationPrinciples: [
      {
        title: "Technische Intelligenz",
        description:
          "Die grundlegenden Webtechnologien haben sich in den letzten Jahren erheblich weiterentwickelt, aber viele Unternehmen und Entwickler verwenden aus Gewohnheit weiterhin schwere Bibliotheken. Ich bevorzuge es, moderne Browser-Funktionen zu nutzen, um visuelle Effekte und flüssige Interaktionen zu erstellen, ohne Kompromisse bei der Geschwindigkeit einzugehen.",
      },
      {
        title: "Respekt für Benutzer",
        description:
          "Keine aufdringlichen Popups oder unnötigen Banner, die das Surfen unterbrechen. Ein reibungsloses Erlebnis, bei dem die Benutzer die Kontrolle über ihre Navigation und ihre Daten behalten.",
      },
      {
        title: "Durchdachte Leistung",
        description:
          "Jedes Designelement hat seinen Zweck, und jeder visuelle Effekt wird optimal implementiert. Das Ergebnis: Websites, die gleichzeitig ästhetisch, schnell und ressourcenschonend sind.",
      },
      {
        title: "Öko-Modus wo es zählt",
        description:
          "Dieses Portfolio bietet einen Öko-Modus, der auch bei eingeschränkter Verbindung Zugriff auf Inhalte ermöglicht. Obwohl dieser Ansatz nicht für alle Projekte relevant ist (insbesondere visuelle), sollte er für wesentliche Dienste und Informationswebsites weiter verbreitet sein.",
      },
    ],
  },
};

// Utiliser la langue demandée ou français par défaut
const t = content[lang] || content.fr;

// Mode éco activé
const isEcoMode = true;
---

<Layout
  title={t.title}
  description={t.description}
  lang={lang}
  isEcoMode={isEcoMode}
>
  <div class="container mx-auto px-4 py-8">
    <!-- Section hero simplifiée -->
    <section class="py-6 border-b border-secondary mb-6">
      <div class="flex flex-wrap gap-6 items-center">
        <div class="flex-1">
          <h1 class="text-2xl font-bold mb-3" set:html={t.heroTitle} />
          <p class="mb-4 text-balance max-w-5xl">
            {t.heroText}
          </p>
          <div class="flex flex-wrap gap-3">
            <a href={`/${lang}/contact/eco/`} class="cta-button">
              {t.contactButton}
            </a>
            <a href={`/${lang}/projects/eco/`} class="btn-secondary">
              {t.projectsButton}
            </a>
          </div>
        </div>

        <Picture
          src={monImage}
          width={128}
          formats={["avif", "webp", "jpg"]}
          alt={t.imageAlt}
          class="w-32 h-32 flex-shrink-0 border-2 border-accent rounded"
          data-astro-transition-persist="profile-image"
          loading="eager"
        />
      </div>
    </section>

    <!-- Section d'intro sur l'éco-conception -->
<section class="py-6 border-b border-secondary mb-6">
  <h2 class="text-xl font-bold mb-3">{t.ecoModeTitle}</h2>
  <p class="mb-3">
    {t.ecoModeText}
  </p>
  <p class="text-sm text-text-muted">
    <a href={`/${lang}/about/eco/`} class="text-link">
      {lang === "fr" 
        ? "En savoir plus sur mon approche d'éco-conception" 
        : lang === "en" 
          ? "Learn more about my eco-design approach" 
          : "Mehr über meinen Öko-Design-Ansatz erfahren"}
    </a>
  </p>
</section>

    <!-- Section services simplifiée -->
    <section class="py-6 border-b border-secondary mb-6">
      <h2 class="text-xl font-bold mb-3">{t.servicesTitle}</h2>
      <ul class="list-disc pl-5">
        {
          t.services.map((service) => (
            <li class="mb-3">
              <strong>{service.title}</strong>: {service.description}
              {service.hasQuote && (
                <span> (<a href={`/${lang}/quote_presentation/eco/`} class="text-link">
                  {lang === "fr" ? "obtenir un devis" : lang === "en" ? "get a quote" : "angebot erhalten"}
                </a>)</span>
              )}
            </li>
          ))
        }
      </ul>
    </section>

    <!-- Section valeurs simplifiée -->
    <section class="pt-6 mb-4">
      <h2 class="text-xl font-bold mb-3 text-accent">Mon approche</h2>
      <ul class="list-disc pl-5">
        {
          t.values.map((value) => (
            <li class="mb-3">
              <strong>{value.title}</strong>: {value.description}
            </li>
          ))
        }
      </ul>
    </section>

    <!-- "Ce qui m'anime" -->
    <section class="py-6 border-b border-secondary mb-6">
      <h2 class="text-xl font-bold mb-3">{t.motivationTitle}</h2>
      <p class="mb-4 max-w-5xl text-balance">{t.motivationIntro}</p>
      <ul class="list-disc pl-5">
        {
          t.motivationPrinciples.map((principle) => (
            <li class="mb-3 max-w-3xl">
              <p class="text-balance"><strong>{principle.title}</strong>: {principle.description}</p>
            </li>
          ))
        }
      </ul>
    </section>

    <!-- Section projets récents avec vignettes très légères -->
<section class="py-6 mb-8">
  <h2 class="text-xl font-bold mb-3 text-accent">{t.projectsTitle}</h2>
  <div class="space-y-4">
    <!-- Projet e-sport -->
    <div class="pb-4 border-b border-secondary border-opacity-30">
      <div class="flex items-start gap-3">
        <!-- Vignette miniature très petite -->
        <Picture
          src={esportImage}
          width={128}
          formats={["avif", "webp", "png"]}
          alt=""
          class="w-16 h-16 object-cover rounded flex-shrink-0 opacity-90"
          loading="lazy"
        />
        <div>
          <h3 class="font-medium mb-1">{t.projects.esport.title}</h3>
          <p class="mb-2 text-sm">{t.projects.esport.description}</p>
          <div class="text-xs text-text-muted mb-1">{t.projects.esport.techs}</div>
          <a
            href={`/${lang}/esport/eco/`}
            class="text-link text-xs inline-block"
          >
            {t.projectButton}
          </a>
        </div>
      </div>
    </div>

    <!-- Projet bibliothèque -->
    <div class="pt-2">
      <div class="flex items-start gap-3">
        <!-- Vignette miniature très petite -->
        <Picture
          src={objetImage}
          width={128}
          formats={["avif", "webp", "png"]}
          alt=""
          class="w-16 h-16 object-cover rounded flex-shrink-0 opacity-90"
          loading="lazy"
        />
        <div>
          <h3 class="font-medium mb-1">{t.projects.library.title}</h3>
          <p class="mb-2 text-sm">{t.projects.library.description}</p>
          <div class="text-xs text-text-muted mb-1">{t.projects.library.techs}</div>
          <a
            href={`/${lang}/objet/eco/`}
            class="text-link text-xs inline-block"
          >
            {t.projectButton}
          </a>
        </div>
      </div>
    </div>
  </div>
  <div class="text-center mt-6">
    <a href={`/${lang}/projects/eco/`} class="text-link text-sm">
      {t.viewAllProjectsButton} →
    </a>
  </div>
</section>

    <!-- Section CTA contact -->
    <CtaDispo withBackground={false} transition-persist="cta-dispo"/>
  </div>
</Layout>