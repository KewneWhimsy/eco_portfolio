---
// Import du layout avec mode éco activé
import Layout from "../../../layouts/layout.astro";
import { Picture } from "astro:assets";
import objetImage from "../../../assets/projects/objet00.png";

// Récupérer le paramètre de langue depuis l'URL
export function getStaticPaths() {
  return [
    { params: { lang: "fr" } },
    { params: { lang: "en" } },
    { params: { lang: "de" } },
  ];
}

const lang = Astro.params.lang as "fr" | "en" | "de";

// Contenu traduit pour chaque langue
const content = {
  fr: {
    title: "Bibliothèque d'objets - Quimper | Josselin HANEL (Mode Éco)",
    description:
      "Version éco-responsable de la page projet de l'Objethèque de Cornouaille - Un projet collaboratif pour promouvoir le partage d'objets.",
    projectTitle: "Bibliothèque d'objets - Quimper",
    projectIntro:
      "L'Objethèque de Cornouaille est une association basée à Quimper qui permet aux habitants d'emprunter des objets du quotidien plutôt que de les acheter, favorisant ainsi un mode de vie plus durable.",

    overviewTitle: "Aperçu du projet",
    overviewText:
      "Conçu en collaboration avec <a href='https://jadephom.myportfolio.com/' target='_blank' class='text-jade'>Jade Ounaphom</a>, créatrice audiovisuelle, le site met en avant le fonctionnement de la bibliothèque d'objets, ses actualités et permet d'accéder au catalogue des objets disponibles.",

    challengesTitle: "Défis et approche",
    challenges: [
      "Contraintes budgétaires strictes pour une association à but non lucratif",
      "Nécessité d'intégrer un système de gestion de catalogue existant (MyTurn)",
      "Besoin d'une visibilité sur les réseaux sociaux pour une petite structure locale",
      "Interface simple et immédiatement compréhensible pour des utilisateurs de tous niveaux techniques",
      "Besoin d'afficher et tenir à jour les événements de l'association sans intervention technique régulière",
    ],

    solutionsTitle: "Solutions mises en œuvre",
    solutions: [
      {
        title: "Approche pragmatique",
        description:
          "Utilisation d'Astro pour créer un site léger tout en intégrant les outils existants de l'association (MyTurn).",
      },
      {
        title: "Structure centrée utilisateur",
        description:
          "Interface simple facilitant la compréhension du concept d'objethèque et l'accès au catalogue.",
      },
      {
        title: "Intégration sociale",
        description:
          "Flux Facebook pour afficher les actualités, permettant une gestion unifiée des communications.",
      },
      {
        title: "Collaboration créative",
        description:
          "Travail étroit avec une designeuse pour créer une identité visuelle cohérente et professionnelle.",
      },
      {
        title: "Automatisation",
        description:
          "Workflow GitHub Actions récupérant les données d'événements depuis l'API HelloAsso, réduisant les interventions techniques.",
      },
    ],

    lessonsTitle: "Leçons apprises",
    lessons: [
      "Adapter les solutions techniques aux ressources réelles est plus important que la perfection technique",
      "L'intégration intelligente de services tiers peut compenser les limitations budgétaires",
      "L'automatisation bien conçue autonomise les équipes non-techniques sur le long terme",
    ],

    techTitle: "Technologies utilisées",
    techUsed:
      "Astro, CSS Pro, TypeScript, Alpine.js, GitHub Actions, API HelloAsso",

    visitSite: "Visiter le site web",
    allProjects: "Tous les projets",
    nextProject: "Projet suivant",

    reflectionTitle: "Réflexion personnelle",
    reflectionText:
      "Ce projet, bien qu'imparfait d'un point de vue technique, représente une étape importante dans mon parcours. Réalisé bénévolement, il répond à un besoin concret avec les moyens disponibles. Si je devais le refaire aujourd'hui, j'explorerais des alternatives aux iframes et je mettrais davantage l'accent sur les performances. Néanmoins, ce site remplit efficacement sa mission principale : aider une association éco-responsable à promouvoir le partage d'objets dans sa communauté.",

    ecoModeTitle: "Mode Éco activé",
    ecoModeText:
      "Vous consultez actuellement la version ultra-légère de mon portfolio.",
  },
  en: {
    title: "Object Library - Quimper | Josselin HANEL (Eco Mode)",
    description:
      "Eco-friendly version of the Cornouaille Object Library project page - A collaborative project to promote object sharing.",
    projectTitle: "Object Library - Quimper",
    projectIntro:
      "The Cornouaille Object Library is an association based in Quimper that allows residents to borrow everyday objects rather than buying them, thus promoting a more sustainable lifestyle.",

    overviewTitle: "Project overview",
    overviewText:
      "Designed in collaboration with <a href='https://jadephom.myportfolio.com/' target='_blank' class='text-jade'>Jade Ounaphom</a>, audiovisual creator, the website highlights how the object library works, its news and provides access to the catalog of available objects.",

    challengesTitle: "Challenges and approach",
    challenges: [
      "Strict budget constraints for a non-profit association",
      "Need to integrate an existing catalog management system (MyTurn)",
      "Need for social media visibility for a small local organization",
      "Simple and immediately understandable interface for users of all technical levels",
      "Need to display and keep association events updated without regular technical intervention",
    ],

    solutionsTitle: "Implemented solutions",
    solutions: [
      {
        title: "Pragmatic approach",
        description:
          "Using Astro to create a lightweight site while integrating the association's existing tools (MyTurn).",
      },
      {
        title: "User-centered structure",
        description:
          "Simple interface facilitating understanding of the object library concept and catalog access.",
      },
      {
        title: "Social integration",
        description:
          "Facebook feed to display news, allowing unified communication management.",
      },
      {
        title: "Creative collaboration",
        description:
          "Close work with a designer to create a coherent and professional visual identity.",
      },
      {
        title: "Automation",
        description:
          "GitHub Actions workflow retrieving event data from the HelloAsso API, reducing technical interventions.",
      },
    ],

    lessonsTitle: "Lessons learned",
    lessons: [
      "Adapting technical solutions to real resources is more important than technical perfection",
      "Smart integration of third-party services can compensate for budget limitations",
      "Well-designed automation empowers non-technical teams in the long run",
    ],

    techTitle: "Technologies used",
    techUsed:
      "Astro, CSS Pro, TypeScript, Alpine.js, GitHub Actions, HelloAsso API",

    visitSite: "Visit the website",
    allProjects: "All projects",
    nextProject: "Next project",

    reflectionTitle: "Personal reflection",
    reflectionText:
      "This project, although technically imperfect, represents an important step in my journey. Created voluntarily, it addresses a concrete need with available resources. If I were to do it again today, I would explore alternatives to iframes and place more emphasis on performance. Nevertheless, this site effectively fulfills its main mission: helping an eco-friendly association promote object sharing in its community.",

    ecoModeTitle: "Eco Mode activated",
    ecoModeText:
      "You are currently viewing the ultra-lightweight version of my portfolio.",
  },
  de: {
    title: "Objektbibliothek - Quimper | Josselin HANEL (Öko-Modus)",
    description:
      "Umweltfreundliche Version der Cornouaille-Objektbibliothek-Projektseite - Ein Gemeinschaftsprojekt zur Förderung des Objektteilens.",
    projectTitle: "Objektbibliothek - Quimper",
    projectIntro:
      "Die Objektbibliothek Cornouaille ist ein Verein mit Sitz in Quimper, der es Einwohnern ermöglicht, Alltagsgegenstände auszuleihen, anstatt sie zu kaufen, und so einen nachhaltigeren Lebensstil fördert.",

    overviewTitle: "Projektübersicht",
    overviewText:
      "In Zusammenarbeit mit <a href='https://jadephom.myportfolio.com/' target='_blank' class='text-jade'>Jade Ounaphom</a>, audiovisuelle Gestalterin, präsentiert die Website die Funktionsweise der Objektbibliothek, ihre Neuigkeiten und bietet Zugang zum Katalog der verfügbaren Objekte.",

    challengesTitle: "Herausforderungen und Ansatz",
    challenges: [
      "Strenge Budgetbeschränkungen für einen gemeinnützigen Verein",
      "Notwendigkeit, ein bestehendes Katalogverwaltungssystem (MyTurn) zu integrieren",
      "Bedarf an Social-Media-Sichtbarkeit für eine kleine lokale Organisation",
      "Einfache und sofort verständliche Benutzeroberfläche für Benutzer aller technischen Niveaus",
      "Bedarf an Anzeige und Aktualisierung von Vereinsveranstaltungen ohne regelmäßige technische Eingriffe",
    ],

    solutionsTitle: "Umgesetzte Lösungen",
    solutions: [
      {
        title: "Pragmatischer Ansatz",
        description:
          "Verwendung von Astro zur Erstellung einer leichten Website unter Integration der bestehenden Tools des Vereins (MyTurn).",
      },
      {
        title: "Benutzerzentrierte Struktur",
        description:
          "Einfache Benutzeroberfläche, die das Verständnis des Objektbibliothekskonzepts und den Katalogzugriff erleichtert.",
      },
      {
        title: "Soziale Integration",
        description:
          "Facebook-Feed zur Anzeige von Neuigkeiten, der eine einheitliche Kommunikationsverwaltung ermöglicht.",
      },
      {
        title: "Kreative Zusammenarbeit",
        description:
          "Enge Zusammenarbeit mit einer Designerin zur Erstellung einer kohärenten und professionellen visuellen Identität.",
      },
      {
        title: "Automatisierung",
        description:
          "GitHub Actions-Workflow zum Abrufen von Ereignisdaten aus der HelloAsso-API, wodurch technische Eingriffe reduziert werden.",
      },
    ],

    lessonsTitle: "Gelernte Lektionen",
    lessons: [
      "Die Anpassung technischer Lösungen an reale Ressourcen ist wichtiger als technische Perfektion",
      "Intelligente Integration von Drittanbieterdiensten kann Budgetbeschränkungen ausgleichen",
      "Gut konzipierte Automatisierung stärkt nicht-technische Teams langfristig",
    ],

    techTitle: "Verwendete Technologien",
    techUsed:
      "Astro, CSS Pro, TypeScript, Alpine.js, GitHub Actions, HelloAsso API",

    visitSite: "Website besuchen",
    allProjects: "Alle Projekte",
    nextProject: "Nächstes Projekt",

    reflectionTitle: "Persönliche Reflexion",
    reflectionText:
      "Dieses Projekt, obwohl technisch nicht perfekt, stellt einen wichtigen Schritt in meiner Entwicklung dar. Es wurde freiwillig erstellt und adressiert mit den verfügbaren Ressourcen einen konkreten Bedarf. Wenn ich es heute noch einmal machen würde, würde ich Alternativen zu Iframes erkunden und mehr Wert auf Leistung legen. Nichtsdestotrotz erfüllt diese Website ihre Hauptaufgabe effektiv: einer umweltfreundlichen Vereinigung zu helfen, das Teilen von Objekten in ihrer Gemeinschaft zu fördern.",

    ecoModeTitle: "Öko-Modus aktiviert",
    ecoModeText: "Sie sehen gerade die ultraleichte Version meines Portfolios.",
  },
};

// Obtenir les projets précédent et suivant selon la langue
const getProjectUrl = (projectId: string) => `/${lang}/esport/eco/`;
const nextProject = {
  id: "esport",
  title:
    lang === "fr"
      ? "Application e-sport avec chat"
      : lang === "en"
        ? "E-sport Application with Chat"
        : "E-Sport-Anwendung mit Chat",
};

// Utiliser la langue demandée ou français par défaut
const t = content[lang] || content.fr;

// Mode éco activé
const isEcoMode = true;
---

<Layout
  title={t.title}
  description={t.description}
  lang={lang}
  isEcoMode={isEcoMode}
>
  <div class="container mx-auto px-4 py-6">
    <!-- Section d'introduction du mode éco -->
    <section class="py-4 border-b border-secondary mb-6">
      <h2 class="text-xl font-bold mb-2">{t.ecoModeTitle}</h2>
      <p class="mb-3 max-w-4xl">
        {t.ecoModeText}
      </p>
    </section>

    <div class="mb-4">
      <a
        href={`/${lang}/projects/eco/`}
        class="text-text-muted hover:text-accent transition-colors"
      >
        &larr; {t.allProjects}
      </a>
    </div>

    <!-- En-tête du projet -->
    <header class="mb-8">
      <h1 class="text-2xl font-bold mb-4 border-b border-accent pb-2">
        {t.projectTitle} (2024)
      </h1>
      <p class="mb-4 max-w-4xl">
        {t.projectIntro}
      </p>
    </header>

    <!-- Aperçu du projet -->
    <section class="mb-8 pb-6">
      <h2 class="text-xl font-semibold mb-3 text-accent">
        {t.overviewTitle}
      </h2>
      <p class="mb-4 max-w-4xl" set:html={t.overviewText} />

      <!-- Actions principales -->
      <a
        href="https://objethequecornouaille.fr/"
        target="_blank"
        rel="noopener noreferrer"
        class="cta-button inline-block mb-4"
      >
        {t.visitSite}
      </a>
      <!-- Image principale légère en mode éco -->
      <div class="mb-8 border-b border-secondary pb-6">
        <Picture
          src={objetImage}
          widths={[1200]}
          formats={["avif", "webp", "jpg"]}
          alt={t.projectTitle}
          class="w-full rounded my-3 max-w-5xl mx-auto"
          loading="lazy"
        />
      </div>
    </section>

    <!-- Défis et approche -->
    <section class="mb-8 border-b border-secondary pb-6">
      <h2 class="text-xl font-semibold mb-3 text-accent">
        {t.challengesTitle}
      </h2>
      <ul class="list-disc pl-5 mb-3">
        {t.challenges.map((challenge) => <li class="mb-2">{challenge}</li>)}
      </ul>
    </section>

    <!-- Solutions mises en œuvre -->
    <section class="mb-8 border-b border-secondary pb-6">
      <h2 class="text-xl font-semibold mb-3 text-accent">
        {t.solutionsTitle}
      </h2>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mb-3">
        {
          t.solutions.map((solution) => (
            <div class="bg-secondary bg-opacity-10 p-3 rounded">
              <h3 class="font-medium mb-1">{solution.title}</h3>
              <p class="text-text-muted">{solution.description}</p>
            </div>
          ))
        }
      </div>
    </section>

    <!-- Leçons apprises -->
    <section class="mb-8 border-b border-secondary pb-6">
      <h2 class="text-xl font-semibold mb-3 text-accent">
        {t.lessonsTitle}
      </h2>
      <ul class="pl-5 space-y-2 mb-3">
        {
          t.lessons.map((lesson) => (
            <li>
              <span class="text-accent mr-2">•</span>
              {lesson}
            </li>
          ))
        }
      </ul>
    </section>

    <!-- Réflexion personnelle -->
    <section class="mb-8 border-b border-secondary pb-6">
      <h2 class="text-xl font-semibold mb-3 text-accent">
        {t.reflectionTitle}
      </h2>
      <p class="italic mb-3 max-w-4xl">
        {t.reflectionText}
      </p>
    </section>

    <!-- Technologies utilisées -->
    <section class="mb-8">
      <h2 class="text-xl font-semibold mb-3 text-accent">
        {t.techTitle}
      </h2>
      <p class="mb-3 max-w-4xl">
        {t.techUsed}
      </p>
    </section>

    <!-- Navigation entre projets -->
    <div class="pt-8 mt-12 flex justify-end">
      <a href={getProjectUrl(nextProject.id)} class="text-link">
        {t.nextProject}: {nextProject.title} &rarr;
      </a>
    </div>
  </div>
</Layout>