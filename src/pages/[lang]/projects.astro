---
// Import du layout standard
import Layout from '../../layouts/layout.astro';

import { Picture } from 'astro:assets';
import objetImage from '../../assets/projects/objet01.png';
import esportImage from '../../assets/projects/esport01.png';
import portfolioImage from '../../assets/projects/portfolio01.png'

// Récupérer le paramètre de langue depuis l'URL
export function getStaticPaths() {
  return [
    { params: { lang: 'fr' } },
    { params: { lang: 'en' } },
    { params: { lang: 'de' } }
  ];
}

const lang = Astro.params.lang as 'fr' | 'en' | 'de';

// Contenu traduit pour chaque langue
const content = {
  fr: {
    title: 'Josselin HANEL - Projets',
    description: 'Découvrez mes projets de développement web éco-responsable et mes réalisations récentes.',
    projectsTitle: 'Mes projets',
    projectsIntro: "Voici une sélection de mes projets récents. Chaque réalisation est pensée avec une approche d'éco-conception et d'accessibilité.",
    viewProject: 'Voir le projet',
    visitSite: 'Visiter le site',
    viewSourceCode: 'Voir le code source',
    showcaseTitle: 'Focus sur l\'éco-conception',
    showcaseText: "L'éco-conception web consiste à créer des sites et applications qui minimisent leur impact environnemental tout au long de leur cycle de vie. Voici quelques principes que j'applique dans mes projets.",
    principles: [
      {
        title: 'Sobriété technique',
        description: 'Chaque fonctionnalité est analysée en fonction de sa valeur ajoutée réelle pour éviter les fonctionnalités superflues consommatrices de ressources.'
      },
      {
        title: 'Optimisation des ressources',
        description: 'Minimisation des requêtes serveur, compression des contenus, utilisation rationnelle des scripts et optimisation des médias.'
      },
      {
        title: 'Pérennité',
        description: 'Choix de technologies durables et bien maintenues, code modulaire et évolutif, architecture adaptable aux besoins futurs.'
      }
    ],
    contactCTA: 'Vous avez un projet en tête ?',
    contactButton: 'Discutons-en'
  },
  en: {
    title: 'Josselin HANEL - Projects',
    description: 'Discover my eco-friendly web development projects and recent achievements.',
    projectsTitle: 'My projects',
    projectsIntro: "Here is a selection of my recent projects. Each creation is designed with an eco-design and accessibility approach.",
    viewProject: 'View project',
    visitSite: 'Visit site',
    viewSourceCode: 'View source code',
    showcaseTitle: 'Focus on eco-design',
    showcaseText: "Web eco-design consists of creating websites and applications that minimize their environmental impact throughout their life cycle. Here are some principles I apply in my projects.",
    principles: [
      {
        title: 'Technical sobriety',
        description: 'Each feature is analyzed according to its real added value to avoid superfluous resource-consuming features.'
      },
      {
        title: 'Resource optimization',
        description: 'Minimization of server requests, content compression, rational use of scripts and media optimization.'
      },
      {
        title: 'Sustainability',
        description: 'Choice of durable and well-maintained technologies, modular and evolving code, architecture adaptable to future needs.'
      }
    ],
    contactCTA: 'Do you have a project in mind?',
    contactButton: 'Let\'s talk about it'
  },
  de: {
    title: 'Josselin HANEL - Projekte',
    description: 'Entdecken Sie meine umweltfreundlichen Webentwicklungsprojekte und neuesten Erfolge.',
    projectsTitle: 'Meine Projekte',
    projectsIntro: "Hier ist eine Auswahl meiner neuesten Projekte. Jede Kreation ist mit einem Öko-Design- und Zugänglichkeitsansatz konzipiert.",
    viewProject: 'Projekt ansehen',
    visitSite: 'Website besuchen',
    viewSourceCode: 'Quellcode ansehen',
    showcaseTitle: 'Fokus auf Öko-Design',
    showcaseText: "Web-Öko-Design besteht darin, Websites und Anwendungen zu erstellen, die ihre Umweltauswirkungen während ihres gesamten Lebenszyklus minimieren. Hier sind einige Prinzipien, die ich in meinen Projekten anwende.",
    principles: [
      {
        title: 'Technische Nüchternheit',
        description: 'Jede Funktion wird nach ihrem tatsächlichen Mehrwert analysiert, um überflüssige ressourcenverbrauchende Funktionen zu vermeiden.'
      },
      {
        title: 'Ressourcenoptimierung',
        description: 'Minimierung von Serveranfragen, Inhaltskomprimierung, rationelle Nutzung von Skripten und Medienoptimierung.'
      },
      {
        title: 'Nachhaltigkeit',
        description: 'Auswahl langlebiger und gut gewarteter Technologien, modularer und sich entwickelnder Code, an zukünftige Bedürfnisse anpassbare Architektur.'
      }
    ],
    contactCTA: 'Haben Sie ein Projekt im Sinn?',
    contactButton: 'Lassen Sie uns darüber sprechen'
  }
};

// Utiliser la langue demandée ou français par défaut
const t = content[lang] || content.fr;

// Projets à afficher
const projects = [
  {
    id: 'library',
    title: 'Bibliothèque d\'objets - Quimper',
    description: lang === 'fr' ? 
      'Conçu en collaboration avec Jade Ounaphom, créatrice audiovisuelle, le site met en avant le fonctionnement de la bibliothèque d\'objets et ses actualités.' :
      (lang === 'en' ? 
        'Designed in collaboration with Jade Ounaphom, audiovisual creator, the website highlights how the object library works and its news.' : 
        'In Zusammenarbeit mit Jade Ounaphom, audiovisuelle Gestalterin, präsentiert die Website die Funktionsweise der Objektbibliothek und ihre Neuigkeiten.'),
    image: objetImage,
    tech: ['Astro', 'CSS Pro', 'TypeScript', 'Alpine.js', 'GitHub Actions'],
    url: 'https://example.com/library',
    github: 'https://github.com/username/library-project',
    isFeatured: true
  },
  {
    id: 'esport',
    title: 'Application e-sport avec chat',
    description: lang === 'fr' ? 
      'Plateforme de gestion d\'événements e-sport intégrant un système de chat en temps réel via WebSocket et HTMX. (entreprise fictive)' :
      (lang === 'en' ? 
        'E-sport event management platform with a real-time chat system via WebSocket and HTMX. (fictional company)' : 
        'E-Sport-Eventmanagement-Plattform mit einem Echtzeit-Chat-System über WebSocket und HTMX. (fiktives Unternehmen)'),
    image: esportImage,
    tech: ['Astro', 'Tailwind', 'Alpine.js', 'HTMX', 'WebSocket', 'Express', 'PostgreSQL', 'MongoDB'],
    url: 'https://example.com/esport',
    github: 'https://github.com/username/esport-project',
    isFeatured: true
  },
  {
    id: 'portfolio',
    title: 'Portfolio personnel éco-responsable',
    description: lang === 'fr' ? 
      'Mon portfolio personnel avec mode éco, multilingue et conçu selon les principes de l\'éco-conception web.' :
      (lang === 'en' ? 
        'My personal portfolio with eco-mode, multilingual, and designed following web eco-design principles.' : 
        'Mein persönliches Portfolio mit Öko-Modus, mehrsprachig und nach den Prinzipien des Web-Öko-Designs gestaltet.'),
    image: portfolioImage,
    tech: ['Astro', 'Alpine.js', 'TailwindCSS'],
    url: '/',
    github: 'https://github.com/username/eco-portfolio',
    isFeatured: true
  }
];

// Générer l'URL du projet en fonction de la langue actuelle
const getProjectUrl = (projectId: string) => `/${lang}/projects/${projectId}`;
---

<Layout title={t.title} description={t.description} lang={lang}>
  <div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold mb-6 border-b border-accent pb-2">
      {t.projectsTitle}
    </h1>
    
    <p class="text-lg mb-8">
      {t.projectsIntro}
    </p>

    <!-- Liste des projets avec structure Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-8">
      {projects.map(project => (
        <div class="project-card project-card-animate bg-secondary bg-opacity-30 rounded-lg overflow-hidden transition-opacity duration-300 grid grid-rows-[auto_auto_1fr_auto] h-full">
          <div class="flex flex-col flex-1">
            <!-- Couverture du projet (rangée 1) -->
            <div class="bg-primary bg-opacity-30 aspect-video w-full">
              <Picture
                src={project.image}
                widths={[400, 740, 1080]}
                sizes="(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw"
                formats={["avif", "webp", "jpg"]}
                alt={project.title}
                class="w-full h-full object-cover"
                loading="lazy"
              />
            </div>
          
            <!-- Titre (rangée 2) -->
            <h3 class="text-xl font-bold p-4 pb-2 h-[4.5rem] flex items-center">{project.title}</h3>
          
            <!-- Informations du projet (rangée 3) -->
            <div class="p-4 pt-0">
              <p class="mb-4">{project.description}</p>
            
              <!-- Technologies -->
              <div class="mb-4">
                <div class="flex flex-wrap gap-1.5">
                  {project.tech.map(tech => (
                    <span class="px-2 py-0.5 border border-accent text-light rounded-full text-xs">
                      {tech}
                    </span>
                  ))}
                </div>
              </div>
            </div>
          </div>
          <!-- Boutons d'action (rangée 4) -->
          <div class="p-4 pt-0">
            <div class="flex flex-wrap mt-auto gap-2">
              <a 
                href={getProjectUrl(project.id)} 
                class="flex-1 text-center btn-primary text-sm"
              >
                {t.viewProject}
              </a>
              
              <a 
                href={project.url} 
                target="_blank" 
                rel="noopener noreferrer" 
                class="flex-1 text-center btn-secondary text-sm"
              >
                {t.visitSite}
              </a>
            </div>
          </div>
        </div>
      ))}
    </div>
    
    <!-- Section sur l'éco-conception -->
    <section class="bg-secondary bg-opacity-30 p-6 rounded-lg mt-12">
      <h2 class="text-2xl font-bold mb-4 text-accent">
        {t.showcaseTitle}
      </h2>
      
      <p class="mb-6 max-w-5xl">
        {t.showcaseText}
      </p>
      
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        {t.principles.map(principle => (
          <div class="p-4 bg-primary bg-opacity-20 rounded-lg">
            <h3 class="text-lg font-semibold mb-2 text-accent">{principle.title}</h3>
            <p>{principle.description}</p>
          </div>
        ))}
      </div>
    </section>
    
    <!-- CTA Contact -->
    <section class="mt-12 py-8 text-center">
      <h2 class="text-2xl font-bold mb-4">{t.contactCTA}</h2>
      <a 
        href={`/${lang}/contact`}
        class="btn-primary" 
      >
        {t.contactButton}
      </a>
    </section>
  </div>
</Layout>