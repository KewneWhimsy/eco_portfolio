---
// Import du layout standard
import Layout from '../../layouts/layout.astro';

import { Picture } from 'astro:assets';
import objetImage from '../../assets/projects/objet01.png';
import esportImage from '../../assets/projects/esport01.png';
import portfolioImage from '../../assets/projects/portfolio01.png'

// Récupérer le paramètre de langue depuis l'URL
export function getStaticPaths() {
  return [
    { params: { lang: 'fr' } },
    { params: { lang: 'en' } },
    { params: { lang: 'de' } }
  ];
}

const lang = Astro.params.lang as 'fr' | 'en' | 'de';

// Contenu traduit pour chaque langue
const content = {
  fr: {
    title: 'Josselin HANEL - Projets',
    description: 'Découvrez mes projets de développement web éco-responsable et mes réalisations récentes.',
    projectsTitle: 'Mes projets',
    projectsIntro: "Voici une sélection de mes projets récents. Chaque réalisation est pensée avec une approche d'éco-conception et d'accessibilité.",
    viewProject: 'Découvrir le projet',
    showcaseTitle: 'Focus sur l\'éco-conception',
    showcaseText: "L'éco-conception web consiste à créer des sites et applications qui minimisent leur impact environnemental tout au long de leur cycle de vie. Voici quelques principes que j'applique dans mes projets.",
    principles: [
      {
        title: 'Sobriété technique',
        description: 'Chaque fonctionnalité est analysée en fonction de sa valeur ajoutée réelle pour éviter les fonctionnalités superflues consommatrices de ressources.'
      },
      {
        title: 'Optimisation des ressources',
        description: 'Minimisation des requêtes serveur, compression des contenus, utilisation rationnelle des scripts et optimisation des médias.'
      },
      {
        title: 'Pérennité',
        description: 'Choix de technologies durables et bien maintenues, code modulaire et évolutif, architecture adaptable aux besoins futurs.'
      }
    ],
    upcomingTitle: 'Projets à venir',
    upcomingIntro: 'Voici un aperçu des projets sur lesquels je travaille actuellement :',
    upcomingProjects: [
      {
        title: 'Portfolio et boutique en ligne pour un artiste',
        description: 'Je développe un portfolio minimaliste et une boutique en ligne pour un ami artiste qui crée de l\'art numérique et physique. La boutique est discrète — cachée des parties non commerciales du site — et comprend un système de paiement Stripe simple pour les impressions, les packs d\'assets (pour Unreal Engine), les liens Buy Me a Coffee, et plus encore. L\'objectif est de garder l\'accent sur l\'art, sans le surcharger avec des éléments de e-commerce.'
      },
      {
        title: 'Jeu web asynchrone avec chat en temps réel',
        description: 'Sur la base de mon projet "Application e-sport avec chat", je travaille à le transformer en un jeu de stratégie sociale en ligne. Il est inspiré de "La Cosa Nostra" (2014) de Johannes Sich, mais sans aléatoire — uniquement des prises de décision humaines, brutes et chaotiques. L\'ambiance est anarchique et rapide, et la direction visuelle est influencée par "Jet Set Radio Future" et le court métrage "Dead Leaves" — bruyant, punk et expressif.'
      }
    ],
    contactCTA: 'Vous avez un projet en tête ?',
    contactButton: 'Discutons-en'
  },
  en: {
    title: 'Josselin HANEL - Projects',
    description: 'Discover my eco-friendly web development projects and recent achievements.',
    projectsTitle: 'My projects',
    projectsIntro: "Here is a selection of my recent projects. Each creation is designed with an eco-design and accessibility approach.",
    viewProject: 'Explore project',
    showcaseTitle: 'Focus on eco-design',
    showcaseText: "Web eco-design consists of creating websites and applications that minimize their environmental impact throughout their life cycle. Here are some principles I apply in my projects.",
    principles: [
      {
        title: 'Technical sobriety',
        description: 'Each feature is analyzed according to its real added value to avoid superfluous resource-consuming features.'
      },
      {
        title: 'Resource optimization',
        description: 'Minimization of server requests, content compression, rational use of scripts and media optimization.'
      },
      {
        title: 'Sustainability',
        description: 'Choice of durable and well-maintained technologies, modular and evolving code, architecture adaptable to future needs.'
      }
    ],
    upcomingTitle: 'Upcoming Projects',
    upcomingIntro: 'Here\'s a preview of projects I\'m currently working on:',
    upcomingProjects: [
      {
        title: 'Portfolio + E-shop for an Artist Friend',
        description: 'I\'m building a minimalist portfolio and online store for a friend who creates digital and physical art. The shop is discreet — hidden from the non-commercial parts of the site — and includes a simple Stripe checkout for prints, asset packs (for Unreal Engine), Buy Me a Coffee links, and more. The goal is to keep the focus on the art, not overwhelm it with e-commerce clutter.'
      },
      {
        title: 'Online Asynchronous Webgame with Real-time Chat',
        description: 'Based on my "E-sport Application with Chat" project, I\'m working on turning it into an online social strategy game. It\'s inspired by "La Cosa Nostra" (2014) from Johannes Sich, but with no randomness — only raw, chaotic, human decision-making. The vibe is anarchic and fast-paced, and the visual direction is influenced by "Jet Set Radio Future" and the short film "Dead Leaves" — loud, punk, and expressive.'
      }
    ],
    contactCTA: 'Do you have a project in mind?',
    contactButton: 'Let\'s talk about it'
  },
  de: {
    title: 'Josselin HANEL - Projekte',
    description: 'Entdecken Sie meine umweltfreundlichen Webentwicklungsprojekte und neuesten Erfolge.',
    projectsTitle: 'Meine Projekte',
    projectsIntro: "Hier ist eine Auswahl meiner neuesten Projekte. Jede Kreation ist mit einem Öko-Design- und Zugänglichkeitsansatz konzipiert.",
    viewProject: 'Projekt entdecken',
    showcaseTitle: 'Fokus auf Öko-Design',
    showcaseText: "Web-Öko-Design besteht darin, Websites und Anwendungen zu erstellen, die ihre Umweltauswirkungen während ihres gesamten Lebenszyklus minimieren. Hier sind einige Prinzipien, die ich in meinen Projekten anwende.",
    principles: [
      {
        title: 'Technische Nüchternheit',
        description: 'Jede Funktion wird nach ihrem tatsächlichen Mehrwert analysiert, um überflüssige ressourcenverbrauchende Funktionen zu vermeiden.'
      },
      {
        title: 'Ressourcenoptimierung',
        description: 'Minimierung von Serveranfragen, Inhaltskomprimierung, rationelle Nutzung von Skripten und Medienoptimierung.'
      },
      {
        title: 'Nachhaltigkeit',
        description: 'Auswahl langlebiger und gut gewarteter Technologien, modularer und sich entwickelnder Code, an zukünftige Bedürfnisse anpassbare Architektur.'
      }
    ],
    upcomingTitle: 'Kommende Projekte',
    upcomingIntro: 'Hier ein Einblick in Projekte, an denen ich derzeit arbeite:',
    upcomingProjects: [
      {
        title: 'Portfolio und Online-Shop für einen Künstlerfreund',
        description: 'Ich entwickle ein minimalistisches Portfolio und einen Online-Shop für einen befreundeten Künstler, der digitale und physische Kunst schafft. Der Shop ist diskret – versteckt von den nicht-kommerziellen Teilen der Website – und umfasst ein einfaches Stripe-Checkout für Drucke, Asset-Pakete (für Unreal Engine), Buy Me a Coffee-Links und mehr. Das Ziel ist es, den Fokus auf die Kunst zu legen, ohne sie mit E-Commerce-Elementen zu überwältigen.'
      },
      {
        title: 'Asynchrones Online-Webspiel mit Echtzeit-Chat',
        description: 'Basierend auf meinem Projekt "E-Sport-Anwendung mit Chat", arbeite ich daran, es in ein Online-Strategiespiel zu verwandeln. Es ist inspiriert von "La Cosa Nostra" (2014) von Johannes Sich, aber ohne Zufälligkeit – nur rohe, chaotische, menschliche Entscheidungsfindung. Die Stimmung ist anarchisch und schnelllebig, und die visuelle Richtung ist beeinflusst von "Jet Set Radio Future" und dem Kurzfilm "Dead Leaves" – laut, punk und ausdrucksstark.'
      }
    ],
    contactCTA: 'Haben Sie ein Projekt im Sinn?',
    contactButton: 'Lassen Sie uns darüber sprechen'
  }
};

// Utiliser la langue demandée ou anglais par défaut
const t = content[lang] || content.en;

// Projets à afficher
const projects = [
  {
    id: 'portfolio',
    title: lang === 'fr' ? 
      'Portfolio personnel éco-responsable (2025)' :
      (lang === 'en' ? 
        'Eco-friendly personal portfolio (2025)' : 
        'Umweltfreundliches persönliches Portfolio (2025)'),
    description: lang === 'fr' ? 
      'Mon portfolio personnel avec mode éco, multilingue et conçu selon les principes de l\'éco-conception web.' :
      (lang === 'en' ? 
        'My personal portfolio with eco-mode, multilingual, and designed following web eco-design principles.' : 
        'Mein persönliches Portfolio mit Öko-Modus, mehrsprachig und nach den Prinzipien des Web-Öko-Designs gestaltet.'),
    image: portfolioImage,
    tech: ['Astro', 'Alpine.js', 'TailwindCSS'],
    isFeatured: true
  },
  {
    id: 'esport',
    title: lang === 'fr' ? 
      'Application e-sport avec chat (2025)' :
      (lang === 'en' ? 
        'E-sport Application with Chat (2025)' : 
        'E-Sport-Anwendung mit Chat (2025)'),
    description: lang === 'fr' ? 
      'Plateforme de gestion d\'événements e-sport intégrant un système de chat en temps réel via WebSocket et HTMX. (entreprise fictive)' :
      (lang === 'en' ? 
        'E-sport event management platform with a real-time chat system via WebSocket and HTMX. (fictional company)' : 
        'E-Sport-Eventmanagement-Plattform mit einem Echtzeit-Chat-System über WebSocket und HTMX. (fiktives Unternehmen)'),
    image: esportImage,
    tech: ['Astro', 'Tailwind', 'Alpine.js', 'HTMX', 'WebSocket', 'Express', 'PostgreSQL', 'MongoDB'],
    url: `/${lang}/esport`,
    isFeatured: true
  },
  {
    id: 'library',
    title: lang === 'fr' ? 
      'Bibliothèque d\'objets - Quimper (2024)' :
      (lang === 'en' ? 
        'Object Library - Quimper (2024)' : 
        'Objektbibliothek - Quimper (2024)'),
    description: lang === 'fr' ? 
      'Conçu en collaboration avec <a href="https://jadephom.myportfolio.com/" target="_blank" rel="noopener" class="text-jade">Jade Ounaphom</a>, créatrice audiovisuelle, le site met en avant le fonctionnement de la bibliothèque d\'objets et ses actualités.' :
      (lang === 'en' ? 
        'Designed in collaboration with <a href="https://jadephom.myportfolio.com/" target="_blank" rel="noopener" class="text-jade">Jade Ounaphom</a>, audiovisual creator, the website highlights how the object library works and its news.' : 
        'In Zusammenarbeit mit <a href="https://jadephom.myportfolio.com/" target="_blank" rel="noopener" class="text-jade">Jade Ounaphom</a>, audiovisuelle Gestalterin, präsentiert die Website die Funktionsweise der Objektbibliothek und ihre Neuigkeiten.'),
    image: objetImage,
    tech: ['Astro', 'CSS Pro', 'TypeScript', 'Alpine.js', 'GitHub Actions'],
    url: `/${lang}/objet`,
    isFeatured: true
  },
];
---

<Layout title={t.title} description={t.description} lang={lang}>
  <div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold mb-6 border-b border-accent pb-2">
      {t.projectsTitle}
    </h1>
    
    <p class="text-lg mb-8">
      {t.projectsIntro}
    </p>

    <!-- Liste des projets avec structure Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-8">
      {projects.map(project => (
        <div class="project-card project-card-animate bg-secondary bg-opacity-30 rounded-lg overflow-hidden transition-opacity duration-300 grid grid-rows-[auto_auto_1fr_auto] h-full">
          <div class="flex flex-col flex-1">
            <!-- Couverture du projet (rangée 1) -->
            <div class="bg-primary bg-opacity-30 aspect-video w-full">
              <Picture
                src={project.image}
                widths={[400, 740, 1080]}
                sizes="(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw"
                formats={["avif", "webp", "jpg"]}
                alt={project.title}
                class="w-full h-full object-cover"
                loading="lazy"
              />
            </div>
          
            <!-- Titre (rangée 2) -->
            <h3 class="text-xl font-bold p-4 pb-2 h-[4.5rem] flex items-center">{project.title}</h3>
          
            <!-- Informations du projet (rangée 3) -->
            <div class="p-4 pt-0">
              <p class="mb-4" set:html={project.description}></p>
            
              <!-- Technologies -->
              <div class="mb-4">
                <div class="flex flex-wrap gap-1.5">
                  {project.tech.map(tech => (
                    <span class="px-2 py-0.5 border border-accent text-light rounded-full text-xs">
                      {tech}
                    </span>
                  ))}
                </div>
              </div>
            </div>
          </div>
          <!-- Boutons d'action (rangée 4) -->
          <div class="p-4 pt-0">
            <div class="flex mt-auto">
              <a 
                href={project.url} 
                rel="noopener noreferrer" 
                class="flex-1 text-center btn-secondary text-sm"
              >
                {t.viewProject}
              </a>
            </div>
          </div>
        </div>
      ))}
    </div>
    
    <!-- Nouvelle section: Projets à venir -->
    <section class="mt-16">
      <h2 class="text-2xl font-bold mb-6 border-b border-accent pb-2">
        {t.upcomingTitle}
      </h2>
      
      <p class="mb-8 text-lg">
        {t.upcomingIntro}
      </p>
      
      <div class="space-y-10">
        {t.upcomingProjects.map((project, index) => (
          <div class="bg-secondary bg-opacity-20 p-6 rounded-lg border-l-4 border-accent">
            <h3 class="text-xl font-bold mb-3 text-accent">
              {project.title}
            </h3>
            <p class="text-text mb-2">
              {project.description}
            </p>
            
            <!-- Tech tags for upcoming projects based on the project index -->
            <div class="flex flex-wrap gap-1.5 mt-4">
              {index === 0 ? 
                ['Astro', 'Tailwind', 'Stripe API', 'Alpine.js'].map(tech => (
                  <span class="px-2 py-0.5 border border-accent text-light rounded-full text-xs">
                    {tech}
                  </span>
                )) : 
                ['Astro', 'Tailwind', 'Alpine.js', 'HTMX', 'WebSocket', 'Express', 'MongoDB', 'anime.js'].map(tech => (
                  <span class="px-2 py-0.5 border border-accent text-light rounded-full text-xs">
                    {tech}
                  </span>
                ))
              }
            </div>
            
            <!-- Status indicator -->
            <div class="flex flex-wrap gap-2 mt-4">
              <div class="inline-block bg-accent bg-opacity-30 px-3 py-1 rounded-full text-xs">
                <span class="inline-block w-2 h-2 bg-accent rounded-full mr-1"></span>
                {lang === 'fr' ? 'En développement' : 
                 lang === 'en' ? 'In development' : 
                 'In Entwicklung'}
              </div>
              
              <!-- Additional status -->
              <div class="inline-block bg-secondary bg-opacity-40 px-3 py-1 rounded-full text-xs">
                {index === 0 ? 
                  (lang === 'fr' ? 'En attente de contenu' : 
                   lang === 'en' ? 'Waiting for content' : 
                   'Warten auf Inhalt') : 
                  (lang === 'fr' ? 'Création du dossier de projet' : 
                   lang === 'en' ? 'Creating project documentation' : 
                   'Erstellung der Projektdokumentation')
                }
              </div>
            </div>
          </div>
        ))}
      </div>
    </section>
    
    <!-- Section sur l'éco-conception -->
    <section class="bg-secondary bg-opacity-30 p-6 rounded-lg mt-12">
      <h2 class="text-2xl font-bold mb-4 text-accent">
        {t.showcaseTitle}
      </h2>
      
      <p class="mb-6 max-w-5xl">
        {t.showcaseText}
      </p>
      
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        {t.principles.map(principle => (
          <div class="p-4 bg-primary bg-opacity-20 rounded-lg">
            <h3 class="text-lg font-semibold mb-2 text-accent">{principle.title}</h3>
            <p>{principle.description}</p>
          </div>
        ))}
      </div>
    </section>
    
    <!-- CTA Contact -->
    <section class="mt-12 py-8 text-center">
      <h2 class="text-2xl font-bold mb-4">{t.contactCTA}</h2>
      <a 
        href={`/${lang}/contact`}
        class="cta-button" 
      >
        {t.contactButton}
      </a>
    </section>
  </div>
</Layout>