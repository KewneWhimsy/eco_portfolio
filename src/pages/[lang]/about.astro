---
// Import du layout standard
import Layout from "../../layouts/layout.astro";
import { Picture } from "astro:assets";
import monImage from "../../assets/j.jpg";
import CtaDispo from "../../components/cta_dispo.astro";
// Import du nouveau composant de compétences
import SkillsWithDescriptions from "../../components/skills_with_descriptions.astro";
// Import du toggle pour mode simple/technique
import SimpleTechToggle from "../../components/simple_tech_toggle.astro";

// Récupérer le paramètre de langue depuis l'URL
export function getStaticPaths() {
  return [
    { params: { lang: "fr" } },
    { params: { lang: "en" } },
    { params: { lang: "de" } },
  ];
}

const lang = Astro.params.lang as "fr" | "en" | "de";

// Contenu traduit pour chaque langue
const content = {
  fr: {
    title: "Josselin HANEL - À propos de moi",
    description:
      "Découvrez mon parcours, mes compétences et ma vision du développement web éco-responsable.",
    aboutTitle: "À propos de moi",
    aboutText:
      "Je suis un développeur web passionné par la création d'expériences numériques performantes et respectueuses de l'environnement. Basé à Rennes et également disponible pour des projets à Nantes, Paris, Berlin ou en télétravail.",
    visionTitle: "Ma vision",
    visionText:
      "Le numérique représente aujourd'hui une part croissante de notre empreinte carbone. En tant que développeur web, je m'engage à concevoir des sites et applications qui minimisent leur impact environnemental sans compromettre l'expérience utilisateur.",
    approachTitle: "Mon approche",
    approach: [
      {
        title: "Éco-conception",
        description:
          "Je conçois des solutions légères, peu gourmandes en ressources serveur et en bande passante. Moins de charge, moins de coûts, plus d'efficacité. Des systèmes faciles à maintenir, pensés pour évoluer sereinement au rythme des besoins.",
      },
      {
        title: "Performance",
        description:
          "Un site rapide est plus agréable à utiliser et consomme moins d'énergie côté utilisateur.",
      },
      {
        title: "Accessibilité",
        description:
          "Je conçois des interfaces accessibles à tous, quel que soit le handicap ou l'appareil utilisé.",
      },
      {
        title: "Durabilité",
        description:
          "Je construis des sites avec des technologies pérennes et maintenables sur le long terme.",
      },
    ],
    expTitle: "Expérience professionnelle",
    experiences: [
      {
        period: "2025 - Aujourd'hui",
        position: "Développeur web freelance",
        company: "Indépendant",
        description:
          "Conception et développement de sites web et applications pour des clients variés avec une attention particulière à l'impact environnemental.",
      },
      {
        period: "2024 - 2025",
        position: "Webmaster",
        company: "Objethèque de Cornouaille",
        description:
          "Intégration et développement d'interfaces utilisateur pour mettre en valeur les activités et évènements de l'association.",
      },
    ],
    eduTitle: "Formation",
    education: [
      {
        year: "2025",
        degree: "TP développeur web et web mobile",
        school: "Studi",
        description:
          "Titre RNCP de niveau 5, formation full stack (backend et frontend).",
      },
      {
        year: "2023 - 2024",
        degree: "The Odin Project",
        school: "Auto-formation",
        description:
          "Parcours complet de développement web full stack avec focus sur JavaScript et technologies modernes.",
      },
      {
        year: "2022 - Présent",
        degree: "Veille technologique",
        school: "Sources diverses",
        description:
          "Auto-formation continue à travers documentation, blogs techniques, conférences et communautés spécialisées en développement web.",
      },
    ],
    skillsTitle: "Compétences techniques",
    contactButton: "Me contacter",
  },
  en: {
    title: "Josselin HANEL - About me",
    description:
      "Discover my background, skills and vision of eco-friendly web development.",
    aboutTitle: "About me",
    aboutText:
      "I'm a web developer passionate about creating high-performance and environmentally-friendly digital experiences. Based in Rennes(France), available for projects in Nantes, Paris, Berlin or remote work.",
    visionTitle: "My vision",
    visionText:
      "Digital technology now represents a growing part of our carbon footprint. As a web developer, I'm committed to designing websites and applications that minimize their environmental impact without compromising user experience.",
    approachTitle: "My approach",
    approach: [
      {
        title: "Eco-design",
        description:
          "I design lightweight solutions with low server resource and bandwidth requirements. Less load, lower costs, greater efficiency. Easy-to-maintain systems designed to evolve smoothly according to needs.",
      },
      {
        title: "Performance",
        description:
          "A fast website is more pleasant to use and consumes less energy on the user side.",
      },
      {
        title: "Accessibility",
        description:
          "I design interfaces accessible to everyone, regardless of disability or device used.",
      },
      {
        title: "Sustainability",
        description:
          "I build websites with lasting technologies that can be maintained over the long term.",
      },
    ],
    expTitle: "Professional experience",
    experiences: [
      {
        period: "2025 - Present",
        position: "Freelance web developer",
        company: "Independent",
        description:
          "Design and development of websites and applications for various clients with special attention to environmental impact.",
      },
      {
        period: "2024 - 2025",
        position: "Webmaster",
        company: "Objethèque de Cornouaille",
        description:
          "Integration and development of user interfaces to showcase the association's activities and events.",
      },
    ],
    eduTitle: "Education",
    education: [
      {
        year: "2025",
        degree: "TP développeur web et web mobile",
        school: "Studi",
        description:
          "Titre RNCP de niveau 5, formation full stack (backend et frontend).",
      },
      {
        year: "2023 - 2024",
        degree: "The Odin Project",
        school: "Auto-formation",
        description:
          "Parcours complet de développement web full stack avec focus sur JavaScript et technologies modernes.",
      },
      {
        year: "2022 - Présent",
        degree: "Veille technologique",
        school: "Sources diverses",
        description:
          "Auto-formation continue à travers documentation, blogs techniques, conférences et communautés spécialisées en développement web.",
      },
    ],
    skillsTitle: "Technical skills",
    contactButton: "Contact me",
  },
  de: {
    title: "Josselin HANEL - Über mich",
    description:
      "Entdecken Sie meinen Werdegang, meine Fähigkeiten und meine Vision von umweltfreundlicher Webentwicklung.",
    aboutTitle: "Über mich",
    aboutText:
      "Ich bin ein Webentwickler mit Leidenschaft für die Erstellung leistungsstarker und umweltfreundlicher digitaler Erlebnisse. Mit Sitz in Rennes(Frankreich) bin ich für Projekte in Nantes, Paris, Berlin oder für Remote-Arbeit verfügbar.",
    visionTitle: "Meine Vision",
    visionText:
      "Die digitale Technologie stellt heute einen wachsenden Teil unseres CO2-Fußabdrucks dar. Als Webentwickler setze ich mich dafür ein, Websites und Anwendungen zu entwickeln, die ihre Umweltauswirkungen minimieren, ohne die Benutzererfahrung zu beeinträchtigen.",
    approachTitle: "Mein Ansatz",
    approach: [
      {
        title: "Öko-Design",
        description:
          "Ich entwickle leichte Lösungen mit geringem Serverressourcen- und Bandbreitenbedarf. Weniger Last, niedrigere Kosten, höhere Effizienz. Wartungsfreundliche Systeme, die sich reibungslos an neue Anforderungen anpassen können.",
      },
      {
        title: "Leistung",
        description:
          "Eine schnelle Website ist angenehmer zu benutzen und verbraucht auf der Benutzerseite weniger Energie.",
      },
      {
        title: "Zugänglichkeit",
        description:
          "Ich entwerfe Schnittstellen, die für jeden zugänglich sind, unabhängig von Behinderung oder verwendetem Gerät.",
      },
      {
        title: "Nachhaltigkeit",
        description:
          "Ich baue Websites mit dauerhaften Technologien, die langfristig gewartet werden können.",
      },
    ],
    expTitle: "Berufserfahrung",
    experiences: [
      {
        period: "2025 - Heute",
        position: "Freelance Webentwickler",
        company: "Unabhängig",
        description:
          "Design und Entwicklung von Websites und Anwendungen für verschiedene Kunden mit besonderem Augenmerk auf Umweltauswirkungen.",
      },
      {
        period: "2024 - 2025",
        position: "Webmaster",
        company: "Objethèque de Cornouaille",
        description:
          "Integration und Entwicklung von Benutzeroberflächen zur Präsentation der Aktivitäten und Veranstaltungen des Vereins.",
      },
    ],
    eduTitle: "Ausbildung",
    education: [
      {
        year: "2025",
        degree: "Beruflicher Titel für Web- und Mobile-Web-Entwicklung",
        school: "Studi",
        description:
          "RNCP Qualifikation Stufe 5, Full-Stack-Ausbildung (Backend und Frontend).",
      },
      {
        year: "2023 - 2024",
        degree: "The Odin Project",
        school: "Selbststudium",
        description:
          "Kompletter Full-Stack-Webentwicklungslehrplan mit Schwerpunkt auf JavaScript und modernen Technologien.",
      },
      {
        year: "2022 - Heute",
        degree: "Technologische Wachsamkeit",
        school: "Verschiedene Quellen",
        description:
          "Kontinuierliches Selbststudium durch Dokumentation, technische Blogs, Konferenzen und spezialisierte Webentwicklungs-Communities.",
      },
    ],
    skillsTitle: "Technische Fähigkeiten",
    contactButton: "Kontaktieren Sie mich",
  },
};

// Utiliser la langue demandée ou français par défaut
const t = content[lang] || content.fr;

// Compétences à afficher
const skills = [
  {
    category: "Frontend",
    emoji: "🖥️", // Emoji pour le design et l'interface
    items: ["Astro", "CSS Pro", "Tailwind", "TypeScript", "HTMX", "Alpine.js"],
  },
  {
    category: "Backend",
    emoji: "⚙️", // Emoji pour les rouages techniques
    items: ["Express", "WebSocket", "Elixir", "Phoenix"],
  },
  {
    category:
      lang === "fr"
        ? "Bases de données"
        : lang === "en"
          ? "Databases"
          : "Datenbanken",
    emoji: "🗄️", // Emoji pour le stockage/classement
    items: ["PostgreSQL", "MongoDB", "PostgREST", "Ecto"],
  },
  {
    category: lang === "fr" ? "Outils" : lang === "en" ? "Tools" : "Werkzeuge",
    emoji: "🛠️", // Emoji pour les outils
    items: ["Git", "Docker", "VS Code", "Lighthouse"],
  },
  {
    category:
      lang === "fr"
        ? "Méthodologies"
        : lang === "en"
          ? "Methodologies"
          : "Methoden",
    emoji: "📐", // Emoji pour les approches analytiques
    items: [
      lang === "fr"
        ? "Accessibilité"
        : lang === "en"
          ? "Accessibility"
          : "Barrierefreiheit",
      "Performance",
      lang === "fr"
        ? "Éco-conception"
        : lang === "en"
          ? "Eco-design"
          : "Öko-Design",
      "UX/UI",
    ],
  },
];
---

<Layout title={t.title} description={t.description} lang={lang}>
  <div class="container mx-auto px-4 py-8" id="about-page">
    <!-- Section d'introduction -->
    <section class="mb-12">
      <h1 class="text-3xl font-bold mb-4 border-b border-accent pb-2">
        {t.aboutTitle}
      </h1>
      <div class="flex flex-col md:flex-row gap-8">
        <div class="md:w-2/3">
          <p class="text-lg mb-6">
            {t.aboutText}
          </p>
          <h2 class="text-xl font-semibold mb-3 text-accent">
            {t.visionTitle}
          </h2>
          <p class="mb-6">
            {t.visionText}
          </p>
        </div>
        <div class="md:w-1/3">
          <div class="bg-secondary rounded-lg p-4">
            <Picture
              src={monImage}
              widths={[400, 600]}
              formats={["avif", "webp", "jpg"]}
              alt={`Josselin HANEL - ${lang === "fr" ? "Développeur Full Stack" : lang === "en" ? "Full Stack Developer" : "Full-Stack-Entwickler"}`}
              class="w-full h-auto object-cover rounded"
              data-astro-transition-persist="profile-image"
              loading="eager"
            />
          </div>
        </div>
      </div>
    </section>

    <!-- Section approche -->
    <section class="mb-12">
      <h2 class="text-2xl font-bold mb-6 border-b border-accent pb-2">
        {t.approachTitle}
      </h2>
      <div class="mb-4 max-w-5xl">
        <ul class="space-y-3">
          {
            t.approach.map((item) => (
              <li class="flex items-start">
                <span class="text-accent mr-2">•</span>
                <p>
                  <strong>{item.title}</strong> : {item.description}
                </p>
              </li>
            ))
          }
        </ul>
      </div>
    </section>

    <!-- Section compétences avec le nouveau composant -->
    <!-- Section compétences avec toggle -->
<section class="mb-12">
  <div class="flex justify-between items-center mb-6">
    <h2 class="text-2xl font-bold border-b border-accent pb-2">
      {t.skillsTitle}
    </h2>
    
    <!-- Toggle avec un petit bout de JavaScript inline -->
    <div class="inline-flex items-center">
      <input 
        type="checkbox" 
        id="tech-toggle" 
        class="hidden" 
        onclick="document.body.classList.toggle('simple-mode');"
      >
      <label for="tech-toggle" class="flex items-center text-sm cursor-pointer">
        <span class="tech-mode mr-3 text-accent">
          {lang === "fr" ? "Mode technique" : lang === "de" ? "Technischer Modus" : "Technical mode"}
        </span>
        <div class="relative w-12 h-6 bg-secondary border border-accent rounded-full">
          <div class="toggle-dot absolute top-0.5 left-0.5 bg-accent rounded-full h-5 w-5"></div>
        </div>
        <span class="simple-mode ml-3 text-text-muted">
          {lang === "fr" ? "Mode simplifié" : lang === "de" ? "Vereinfachter Modus" : "Simplified mode"}
        </span>
      </label>
    </div>
  </div>
  
  <!-- Composant de compétences inchangé -->
  <SkillsWithDescriptions lang={lang} skills={skills} />
</section>

    <!-- Section expérience -->
    <section class="mb-12">
      <h2 class="text-2xl font-bold mb-6 border-b border-accent pb-2">
        {t.expTitle}
      </h2>
      <div class="space-y-6">
        {
          t.experiences.map((exp) => (
            <div class="border-l-2 border-accent pl-4 py-2">
              <div class="flex flex-wrap justify-between mb-2">
                <h3 class="text-xl font-semibold">{exp.position}</h3>
                <span class="text-text-muted">{exp.period}</span>
              </div>
              <p class="text-accent mb-2">{exp.company}</p>
              <p>{exp.description}</p>
            </div>
          ))
        }
      </div>
    </section>

    <!-- Section formation -->
    <section class="mb-12">
      <h2 class="text-2xl font-bold mb-6 border-b border-accent pb-2">
        {t.eduTitle}
      </h2>
      <div class="space-y-6">
        {
          t.education.map((edu) => (
            <div class="border-l-2 border-accent pl-4 py-2">
              <div class="flex flex-wrap justify-between mb-2">
                <h3 class="text-xl font-semibold">{edu.degree}</h3>
                <span class="text-text-muted">{edu.year}</span>
              </div>
              <p class="text-accent mb-2">{edu.school}</p>
              <p>{edu.description}</p>
            </div>
          ))
        }
      </div>
    </section>

    <!-- Section CTA contact -->
    <CtaDispo transition-persist="cta-dispo" />
  </div>
</Layout>
