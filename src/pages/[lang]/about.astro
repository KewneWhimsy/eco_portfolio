---
// Import du layout standard
import Layout from "../../layouts/layout.astro";
import { Picture } from "astro:assets";
import monImage from "../../assets/j.jpg";
import CtaDispo from "../../components/cta_dispo.astro";
// Import du nouveau composant de compétences
import SkillsWithDescriptions from "../../components/skills_with_descriptions.astro";

// Récupérer le paramètre de langue depuis l'URL
export function getStaticPaths() {
  return [
    { params: { lang: "fr" } },
    { params: { lang: "en" } },
    { params: { lang: "de" } },
  ];
}

const lang = Astro.params.lang as "fr" | "en" | "de";

// Contenu traduit pour chaque langue
const content = {
  fr: {
    title: "Josselin HANEL - Qui je suis",
    description:
      "Découvrez mon parcours, mes compétences et ma façon de créer des sites internet qui respectent la planète.",
    aboutTitle: "Qui suis-je ?",
    aboutText:
      "Je crée des sites internet rapides et qui consomment moins d'énergie. Basé à Rennes, je travaille aussi pour des clients à Nantes, Paris, Berlin ou à distance depuis chez moi.",
    visionTitle: "Ma vision",
    visionText:
      "Internet consomme de plus en plus d'électricité dans le monde. En tant que créateur de sites, je m'engage à faire des sites plus légers, qui marchent bien sans gaspiller de l'énergie et <strong>sans vous ruiner</strong>.",
    approachTitle: "Ma façon de travailler",
    approach: [
      {
        title: "Sites légers",
        description:
          "Je crée des sites qui ne pompent pas toutes vos données et qui coûtent moins cher à héberger. Des solutions simples qui évoluent facilement quand votre activité grandit.",
      },
      {
        title: "Rapidité",
        description:
          "Un site rapide est plus agréable à utiliser et vos visiteurs restent plus longtemps. En bonus, ça consomme moins de batterie sur leur téléphone !",
      },
      {
        title: "Pour tous",
        description:
          "Je fais des sites que tout le monde peut utiliser facilement, même les personnes âgées ou avec un handicap.",
      },
      {
        title: "Qui durent",
        description:
          "Plutôt que des solutions à la mode qui seront obsolètes dans 2 ans, je construis des sites solides qui fonctionneront longtemps sans tout casser.",
      },
    ],
    expTitle: "Mon expérience",
    experiences: [
      {
        period: "2025 - Aujourd'hui",
        position: "Créateur de sites internet",
        company: "À mon compte",
        description:
          "Je crée des sites pour différents clients (artisans, commerçants, associations) en faisant attention à ce qu'ils soient économes en énergie.",
      },
      {
        period: "2024 - 2025",
        position: "Responsable du site internet",
        company: "Objethèque de Cornouaille",
        description:
          "J'ai créé et mis à jour le site internet pour mettre en valeur les activités et événements de l'association.",
      },
    ],
    eduTitle: "Formation",
    education: [
      {
        year: "2025",
        degree: "Diplôme de développeur web",
        school: "Studi",
        description:
          "Formation complète pour créer des sites de A à Z (côté visiteur et côté technique).",
      },
      {
        year: "2023 - 2024",
        degree: "The Odin Project",
        school: "Formation en ligne",
        description:
          "Apprentissage complet pour créer des sites modernes avec les dernières technologies.",
      },
      {
        year: "2022 - Présent",
        degree: "Formation continue",
        school: "Diverses sources",
        description:
          "Je me forme en permanence pour rester à jour et vous proposer les meilleures solutions.",
      },
    ],
    skillsTitle: "Ce que je sais faire",
    contactButton: "Me contacter",
  },
  en: {
    title: "Josselin HANEL - About me",
    description:
      "Discover my background, skills and vision of eco-friendly web development.",
    aboutTitle: "About me",
    aboutText:
      "I'm a web developer passionate about creating high-performance and environmentally-friendly digital experiences. Based in Rennes(France), available for projects in Nantes, Paris, Berlin or remote work.",
    visionTitle: "My vision",
    visionText:
      "Digital technology now represents a growing part of our carbon footprint. As a web developer, I'm committed to designing websites and applications that minimize their environmental impact without compromising user experience.",
    approachTitle: "My approach",
    approach: [
      {
        title: "Eco-design",
        description:
          "I design lightweight solutions with low server resource and bandwidth requirements. Less load, lower costs, greater efficiency. Easy-to-maintain systems designed to evolve smoothly according to needs.",
      },
      {
        title: "Performance",
        description:
          "A fast website is more pleasant to use and consumes less energy on the user side.",
      },
      {
        title: "Accessibility",
        description:
          "I design interfaces accessible to everyone, regardless of disability or device used.",
      },
      {
        title: "Sustainability",
        description:
          "I build websites with lasting technologies that can be maintained over the long term.",
      },
    ],
    expTitle: "Professional experience",
    experiences: [
      {
        period: "2025 - Present",
        position: "Freelance web developer",
        company: "Independent",
        description:
          "Design and development of websites and applications for various clients with special attention to environmental impact.",
      },
      {
        period: "2024 - 2025",
        position: "Webmaster",
        company: "Objethèque de Cornouaille",
        description:
          "Integration and development of user interfaces to showcase the association's activities and events.",
      },
    ],
    eduTitle: "Education",
    education: [
      {
        year: "2025",
        degree: "TP développeur web et web mobile",
        school: "Studi",
        description:
          "Titre RNCP de niveau 5, formation full stack (backend et frontend).",
      },
      {
        year: "2023 - 2024",
        degree: "The Odin Project",
        school: "Auto-formation",
        description:
          "Parcours complet de développement web full stack avec focus sur JavaScript et technologies modernes.",
      },
      {
        year: "2022 - Présent",
        degree: "Veille technologique",
        school: "Sources diverses",
        description:
          "Auto-formation continue à travers documentation, blogs techniques, conférences et communautés spécialisées en développement web.",
      },
    ],
    skillsTitle: "Technical skills",
    contactButton: "Contact me",
  },
  de: {
    title: "Josselin HANEL - Über mich",
    description:
      "Entdecken Sie meinen Werdegang, meine Fähigkeiten und meine Vision von umweltfreundlicher Webentwicklung.",
    aboutTitle: "Über mich",
    aboutText:
      "Ich bin ein Webentwickler mit Leidenschaft für die Erstellung leistungsstarker und umweltfreundlicher digitaler Erlebnisse. Mit Sitz in Rennes(Frankreich) bin ich für Projekte in Nantes, Paris, Berlin oder für Remote-Arbeit verfügbar.",
    visionTitle: "Meine Vision",
    visionText:
      "Die digitale Technologie stellt heute einen wachsenden Teil unseres CO2-Fußabdrucks dar. Als Webentwickler setze ich mich dafür ein, Websites und Anwendungen zu entwickeln, die ihre Umweltauswirkungen minimieren, ohne die Benutzererfahrung zu beeinträchtigen.",
    approachTitle: "Mein Ansatz",
    approach: [
      {
        title: "Öko-Design",
        description:
          "Ich entwickle leichte Lösungen mit geringem Serverressourcen- und Bandbreitenbedarf. Weniger Last, niedrigere Kosten, höhere Effizienz. Wartungsfreundliche Systeme, die sich reibungslos an neue Anforderungen anpassen können.",
      },
      {
        title: "Leistung",
        description:
          "Eine schnelle Website ist angenehmer zu benutzen und verbraucht auf der Benutzerseite weniger Energie.",
      },
      {
        title: "Zugänglichkeit",
        description:
          "Ich entwerfe Schnittstellen, die für jeden zugänglich sind, unabhängig von Behinderung oder verwendetem Gerät.",
      },
      {
        title: "Nachhaltigkeit",
        description:
          "Ich baue Websites mit dauerhaften Technologien, die langfristig gewartet werden können.",
      },
    ],
    expTitle: "Berufserfahrung",
    experiences: [
      {
        period: "2025 - Heute",
        position: "Freelance Webentwickler",
        company: "Unabhängig",
        description:
          "Design und Entwicklung von Websites und Anwendungen für verschiedene Kunden mit besonderem Augenmerk auf Umweltauswirkungen.",
      },
      {
        period: "2024 - 2025",
        position: "Webmaster",
        company: "Objethèque de Cornouaille",
        description:
          "Integration und Entwicklung von Benutzeroberflächen zur Präsentation der Aktivitäten und Veranstaltungen des Vereins.",
      },
    ],
    eduTitle: "Ausbildung",
    education: [
      {
        year: "2025",
        degree: "Beruflicher Titel für Web- und Mobile-Web-Entwicklung",
        school: "Studi",
        description:
          "RNCP Qualifikation Stufe 5, Full-Stack-Ausbildung (Backend und Frontend).",
      },
      {
        year: "2023 - 2024",
        degree: "The Odin Project",
        school: "Selbststudium",
        description:
          "Kompletter Full-Stack-Webentwicklungslehrplan mit Schwerpunkt auf JavaScript und modernen Technologien.",
      },
      {
        year: "2022 - Heute",
        degree: "Technologische Wachsamkeit",
        school: "Verschiedene Quellen",
        description:
          "Kontinuierliches Selbststudium durch Dokumentation, technische Blogs, Konferenzen und spezialisierte Webentwicklungs-Communities.",
      },
    ],
    skillsTitle: "Technische Fähigkeiten",
    contactButton: "Kontaktieren Sie mich",
  },
};

// Utiliser la langue demandée ou français par défaut
const t = content[lang] || content.fr;

// Compétences à afficher
const skills = [
  {
    category:
      lang === "fr"
        ? "Côté visible"
        : "Frontend",
    emoji: "🖥️", // Emoji pour le design et l'interface
    items: ["Astro", "CSS Pro", "Tailwind", "TypeScript", "HTMX", "Alpine.js"],
  },
  {
    category:
      lang === "fr"
        ? "Côté serveur"
        : "Backend",
    emoji: "⚙️", // Emoji pour les rouages techniques
    items: ["Express", "WebSocket", "Elixir", "Phoenix"],
  },
  {
    category:
      lang === "fr"
        ? "Bases de données"
        : lang === "en"
          ? "Databases"
          : "Datenbanken",
    emoji: "🗄️", // Emoji pour le stockage/classement
    items: ["PostgreSQL", "MongoDB", "PostgREST", "Ecto"],
  },
  {
    category: lang === "fr" ? "Outils" : lang === "en" ? "Tools" : "Werkzeuge",
    emoji: "🛠️", // Emoji pour les outils
    items: ["Git", "Docker", "VS Code", "Lighthouse"],
  },
  {
    category:
      lang === "fr"
        ? "Méthodologies"
        : lang === "en"
          ? "Methodologies"
          : "Methoden",
    emoji: "📐", // Emoji pour les approches analytiques
    items: [
      lang === "fr"
        ? "Accessibilité"
        : lang === "en"
          ? "Accessibility"
          : "Barrierefreiheit",
      "Performance",
      lang === "fr"
        ? "Éco-conception"
        : lang === "en"
          ? "Eco-design"
          : "Öko-Design",
      "UX/UI",
    ],
  },
];
---

<Layout title={t.title} description={t.description} lang={lang}>
  <div class="container mx-auto px-4 py-8" id="about-page">
    <!-- Section d'introduction -->
    <section class="mb-12">
      <h1 class="text-3xl font-bold mb-4 border-b border-accent pb-2">
        {t.aboutTitle}
      </h1>
      <div class="flex flex-col md:flex-row gap-8">
        <div class="md:w-2/3">
          <p class="text-lg mb-6">
            {t.aboutText}
          </p>
          <h2 class="text-xl font-semibold mb-3 text-accent">
            {t.visionTitle}
          </h2>
          <p set:html={t.visionText}></p>
        </div>
        <div class="md:w-1/3">
          <div class="bg-secondary rounded-lg p-4">
            <Picture
              src={monImage}
              widths={[400, 600]}
              formats={["avif", "webp", "jpg"]}
              alt={`Josselin HANEL - ${lang === "fr" ? "Créateur de sites internet" : lang === "en" ? "Full Stack Developer" : "Full-Stack-Entwickler"}`}
              class="w-full h-auto object-cover rounded"
              data-astro-transition-persist="profile-image"
              loading="eager"
            />
          </div>
        </div>
      </div>
    </section>

    <!-- Section approche -->
    <section class="mb-12">
      <h2 class="text-2xl font-bold mb-6 border-b border-accent pb-2">
        {t.approachTitle}
      </h2>
      <div class="mb-4 max-w-5xl">
        <ul class="space-y-3">
          {
            t.approach.map((item) => (
              <li class="flex items-start">
                <span class="text-accent mr-2">•</span>
                <p>
                  <strong>{item.title}</strong> : {item.description}
                </p>
              </li>
            ))
          }
        </ul>
      </div>
    </section>

    <!-- Section compétences avec toggle (CSS-only) -->
    <section class="mb-12">
      <div class="flex flex-col md:flex-row justify-between items-center mb-6">
        <h2 class="text-2xl font-bold border-b border-accent pb-2">
          {t.skillsTitle}
        </h2>
        
        <!-- Toggle amélioré (CSS-only) inversé -->
        <div class="inline-flex items-center bg-secondary bg-opacity-30 px-4 py-2 rounded-lg mt-4 md:mt-0">
          <input 
            type="checkbox" 
            id="tech-toggle" 
            class="hidden" 
            onclick="document.body.classList.toggle('tech-mode');"
          >
          <label for="tech-toggle" class="flex items-center text-sm cursor-pointer">
            <div class="relative w-14 h-7 bg-primary border border-accent rounded-full">
              <div class="toggle-dot absolute top-1 left-1 bg-accent w-5 h-5 rounded-full transition-transform duration-300"></div>
            </div>
            <span class="tech-mode ml-3 transition-colors">
              {lang === "fr" ? "Détails techniques" : lang === "de" ? "Technische Details" : "Technical details"}
            </span>
          </label>
        </div>
      </div>
      
      <!-- Composant de compétences inchangé -->
      <SkillsWithDescriptions lang={lang} skills={skills} />
    </section>

    <!-- Section expérience -->
    <section class="mb-12">
      <h2 class="text-2xl font-bold mb-6 border-b border-accent pb-2">
        {t.expTitle}
      </h2>
      <div class="space-y-6">
        {
          t.experiences.map((exp) => (
            <div class="border-l-2 border-accent pl-4 py-2">
              <div class="flex flex-wrap justify-between mb-2">
                <h3 class="text-xl font-semibold">{exp.position}</h3>
                <span class="text-text-muted">{exp.period}</span>
              </div>
              <p class="text-accent mb-2">{exp.company}</p>
              <p>{exp.description}</p>
            </div>
          ))
        }
      </div>
    </section>

    <!-- Section formation -->
    <section class="mb-12">
      <h2 class="text-2xl font-bold mb-6 border-b border-accent pb-2">
        {t.eduTitle}
      </h2>
      <div class="space-y-6">
        {
          t.education.map((edu) => (
            <div class="border-l-2 border-accent pl-4 py-2">
              <div class="flex flex-wrap justify-between mb-2">
                <h3 class="text-xl font-semibold">{edu.degree}</h3>
                <span class="text-text-muted">{edu.year}</span>
              </div>
              <p class="text-accent mb-2">{edu.school}</p>
              <p>{edu.description}</p>
            </div>
          ))
        }
      </div>
    </section>

    <!-- Section CTA contact -->
    <CtaDispo transition-persist="cta-dispo" />
  </div>
</Layout>