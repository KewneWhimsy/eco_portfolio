---
// Import du layout standard
import Layout from "../../layouts/layout.astro";
import { Picture } from "astro:assets";
import CtaDispo from "../../components/cta_dispo.astro";

// Images du projet
import objetImage from "../../assets/projects/objet00.png";
import objetImage2 from "../../assets/projects/objet02.png";
import objetImage3 from "../../assets/projects/objet03.png";
import objetImage4 from "../../assets/projects/objet04.png";
import objetImage5 from "../../assets/projects/objet05.png";

// Récupérer le paramètre de langue depuis l'URL
export function getStaticPaths() {
  return [
    { params: { lang: "fr", project: "library" } },
    { params: { lang: "en", project: "library" } },
    { params: { lang: "de", project: "library" } },
  ];
}

const lang = Astro.params.lang as "fr" | "en" | "de";

// Contenu traduit pour chaque langue
const content = {
  fr: {
    title: "Bibliothèque d'objets - Quimper | Josselin HANEL",
    description: "Projet de création du site web de l'Objethèque de Cornouaille - Un projet collaboratif et communautaire pour promouvoir le partage d'objets.",
    projectTitle: "Bibliothèque d'objets - Quimper",
    projectIntro: "L'Objethèque de Cornouaille est une association basée à Quimper qui permet aux habitants d'emprunter des objets du quotidien plutôt que de les acheter, favorisant ainsi un mode de vie plus durable.",
    
    overviewTitle: "Aperçu du projet",
    overviewText: "Conçu en collaboration avec <a href='https://jadephom.myportfolio.com/' target='_blank' class='text-jade'>Jade Ounaphom</a>, créatrice audiovisuelle, le site met en avant le fonctionnement de la bibliothèque d'objets, ses actualités et permet d'accéder au catalogue des objets disponibles.",

    challengesTitle: "Défis et approche",
    challenges: [
  {
    title: "Contraintes budgétaires",
    description: "Développer une solution professionnelle avec des ressources très limitées et sans possibilité d'investissement dans des services payants coûteux."
  },
  {
    title: "Intégration système existant",
    description: "Faire cohabiter harmonieusement le site avec MyTurn, un logiciel tiers déjà utilisé par l'association pour la gestion des prêts."
  },
  {
    title: "Visibilité sociale",
    description: "Créer une présence cohérente entre le site web et les réseaux sociaux, essentiels pour une petite structure qui doit se faire connaître localement."
  },
  {
    title: "Interface accessible",
    description: "Concevoir un parcours utilisateur intuitif pour un public très varié, incluant des personnes peu familières avec la technologie."
  },
  {
    title: "Maintenance facilitée",
    description: "Permettre aux bénévoles non-techniques de gérer le contenu du site sans formation spécifique ni intervention d'un développeur."
  }
],
    
    solutionsTitle: "Solutions mises en œuvre",
    solutions: [
      {
        title: "Approche pragmatique et économique",
        description: "Utilisation d'Astro pour créer rapidement un site léger et performant, tout en intégrant les outils déjà existants de l'association pour ne pas alourdir leur budget (solution MyTurn à 30€/an)."
      },
      {
        title: "Focus sur l'essentiel",
        description: "Structure simple et efficace centrée sur les besoins réels des utilisateurs : comprendre le principe de l'objethèque, voir les actualités et accéder au catalogue des objets."
      },
      {
        title: "Intégration sociale",
        description: "Utilisation d'un flux Facebook pour afficher les actualités, permettant à l'équipe bénévole de ne gérer qu'un seul canal de communication tout en alimentant le site web automatiquement."
      },
      {
        title: "Collaboration créative",
        description: "Travail en étroite collaboration avec une designeuse qui a créé l'identité visuelle et les éléments graphiques, apportant une dimension professionnelle au projet malgré les contraintes."
      },
      {
        title: "Mode sombre adaptatif",
        description: "Implémentation d'un mode sombre qui s'adapte automatiquement aux préférences système de l'utilisateur, sans bouton de toggle pour préserver l'identité visuelle de l'association en mode clair par défaut, tout en améliorant le confort visuel et réduisant la consommation d'énergie sur les appareils à écran OLED/AMOLED."
      },
      {
        title: "Calendrier interactif des événements",
        description: "Développement d'un calendrier intuitif avec Alpine.js permettant aux visiteurs de visualiser rapidement les ateliers et événements à venir."
      },
      {
        title: "Automatisation des mises à jour",
        description: "Création d'un workflow GitHub Actions qui récupère quotidiennement les données d'événements depuis l'API HelloAsso et génère un fichier JSON statique, permettant aux bénévoles de mettre à jour les événements sans intervention technique."
      }
    ],

    lessonsTitle: "Leçons apprises",
    lessons: [
      "L'adaptation des solutions techniques aux contraintes réelles est plus importante que la perfection technique",
      "L'intégration intelligente de services tiers peut compenser les limitations budgétaires",
      "L'automatisation bien pensée est un investissement qui autonomise les équipes non-techniques sur le long terme",
    ],
    
    techTitle: "Technologies et outils utilisés",
    
    visitSite: "Visiter le site web",
    nextProject: "Projet suivant",
    allProjects: "Tous les projets",
    reflectionTitle: "Réflexion personnelle",
    reflectionText: "Ce projet, bien qu'imparfait d'un point de vue technique, représente une étape importante dans mon parcours de développeur. Réalisé bénévolement pour une association locale, il répond à un besoin concret avec les moyens disponibles. Si je devais le refaire aujourd'hui, j'explorerais des alternatives aux iframes et je mettrais davantage l'accent sur les performances. Néanmoins, ce site remplit efficacement sa mission principale : aider une association éco-responsable à promouvoir le partage d'objets dans sa communauté, tout en minimisant les besoins d'intervention technique grâce à l'automatisation."
  },
  en: {
    title: "Object Library - Quimper | Josselin HANEL",
    description: "Creation project for the Cornouaille Object Library website - A collaborative and community project to promote object sharing.",
    projectTitle: "Object Library - Quimper",
    projectIntro: "The Cornouaille Object Library is an association based in Quimper that allows residents to borrow everyday objects rather than buying them, thus promoting a more sustainable lifestyle.",
    
    overviewTitle: "Project overview",
    overviewText: "Designed in collaboration with <a href='https://jadephom.myportfolio.com/' target='_blank' class='text-jade'>Jade Ounaphom</a>, audiovisual creator, the website highlights how the object library works, its news and provides access to the catalog of available objects.",
    
    challengesTitle: "Challenges and approach",
    challenges: [
  {
    title: "Budget Constraints",
    description: "Developing a professional solution with very limited resources and without the possibility of investing in expensive paid services."
  },
  {
    title: "Existing System Integration",
    description: "Creating a seamless coexistence between the website and MyTurn, a third-party software already used by the association for loan management."
  },
  {
    title: "Social Visibility",
    description: "Building a coherent presence between the website and social media, essential for a small organization that needs to gain local recognition."
  },
  {
    title: "Accessible Interface",
    description: "Designing an intuitive user journey for a highly diverse audience, including people who are not familiar with technology."
  },
  {
    title: "Facilitated Maintenance",
    description: "Enabling non-technical volunteers to manage website content without specific training or developer intervention."
  }
],
    
    solutionsTitle: "Implemented solutions",
    solutions: [
      {
        title: "Pragmatic and economical approach",
        description: "Using Astro to quickly create a lightweight and efficient site, while integrating the association's existing tools to avoid increasing their budget (MyTurn solution at €30/year)."
      },
      {
        title: "Focus on essentials",
        description: "Simple and effective structure centered on users' real needs: understanding the principle of the object library, seeing the news, and accessing the object catalog."
      },
      {
        title: "Social integration",
        description: "Using a Facebook feed to display news, allowing the volunteer team to manage only one communication channel while automatically feeding the website."
      },
      {
        title: "Creative collaboration",
        description: "Working closely with a designer who created the visual identity and graphic elements, bringing a professional dimension to the project despite the constraints."
      },
      {
        title: "Adaptive dark mode",
        description: "Implementation of a dark mode that automatically adapts to the user's system preferences, without a toggle button to preserve the association's visual identity in light mode by default, while improving visual comfort and reducing energy consumption on devices with OLED/AMOLED screens."
      },
      {
        title: "Interactive events calendar",
        description: "Development of an intuitive calendar with Alpine.js allowing visitors to quickly visualize upcoming workshops and events."
      },
      {
        title: "Update automation",
        description: "Creation of a GitHub Actions workflow that daily retrieves event data from the HelloAsso API and generates a static JSON file, allowing volunteers to update events without technical intervention."
      }
    ],

    lessonsTitle: "Lessons learned",
    lessons: [
      "Adapting technical solutions to real constraints is more important than technical perfection",
      "Smart integration of third-party services can compensate for budget limitations",
      "Well-designed automation is an investment that empowers non-technical teams in the long run",
    ],
    
    techTitle: "Technologies and tools used",
    
    visitSite: "Visit the website",
    nextProject: "Next project",
    allProjects: "All projects",
    reflectionTitle: "Personal reflection",
    reflectionText: "This project, although technically imperfect, represents an important step in my journey as a developer. Created voluntarily for a local association, it addresses a concrete need with available resources. If I were to do it again today, I would explore alternatives to iframes and place more emphasis on performance. Nevertheless, this site effectively fulfills its main mission: helping an eco-friendly association promote object sharing in its community, while minimizing the need for technical intervention thanks to automation."
  },
  de: {
    title: "Objektbibliothek - Quimper | Josselin HANEL",
    description: "Projekt zur Erstellung der Website der Objektbibliothek Cornouaille - Ein kollaboratives Gemeinschaftsprojekt zur Förderung des Objektteilens.",
    projectTitle: "Objektbibliothek - Quimper",
    projectIntro: "Die Objektbibliothek Cornouaille ist ein Verein mit Sitz in Quimper, der es Einwohnern ermöglicht, Alltagsgegenstände auszuleihen, anstatt sie zu kaufen, und so einen nachhaltigeren Lebensstil fördert.",
    
    overviewTitle: "Projektübersicht",
    overviewText: "In Zusammenarbeit mit <a href='https://jadephom.myportfolio.com/' target='_blank' class='text-jade'>Jade Ounaphom</a>, audiovisuelle Gestalterin, präsentiert die Website die Funktionsweise der Objektbibliothek, ihre Neuigkeiten und bietet Zugang zum Katalog der verfügbaren Objekte.",
    
    challengesTitle: "Herausforderungen und Ansatz",
    challenges: [
  {
    title: "Budgetbeschränkungen",
    description: "Entwicklung einer professionellen Lösung mit sehr begrenzten Ressourcen und ohne die Möglichkeit, in teure kostenpflichtige Dienste zu investieren."
  },
  {
    title: "Integration bestehender Systeme",
    description: "Schaffung einer nahtlosen Koexistenz zwischen der Website und MyTurn, einer bereits vom Verein für die Leihverwaltung genutzten Drittanbieter-Software."
  },
  {
    title: "Soziale Sichtbarkeit",
    description: "Aufbau einer kohärenten Präsenz zwischen Website und sozialen Medien, wesentlich für eine kleine Organisation, die lokale Anerkennung gewinnen muss."
  },
  {
    title: "Zugängliche Benutzeroberfläche",
    description: "Gestaltung einer intuitiven Benutzerreise für ein sehr vielfältiges Publikum, einschließlich Menschen, die mit Technologie nicht vertraut sind."
  },
  {
    title: "Erleichterte Wartung",
    description: "Befähigung nicht-technischer Freiwilliger zur Verwaltung von Website-Inhalten ohne spezifische Schulung oder Eingriff eines Entwicklers."
  }
],
    
    solutionsTitle: "Umgesetzte Lösungen",
    solutions: [
      {
        title: "Pragmatischer und wirtschaftlicher Ansatz",
        description: "Verwendung von Astro zur schnellen Erstellung einer leichten und effizienten Website unter Integration der bestehenden Tools des Vereins, um deren Budget nicht zu erhöhen (MyTurn-Lösung für 30 €/Jahr)."
      },
      {
        title: "Fokus auf das Wesentliche",
        description: "Einfache und effektive Struktur, die auf die tatsächlichen Bedürfnisse der Benutzer ausgerichtet ist: Verständnis des Prinzips der Objektbibliothek, Einsehen der Neuigkeiten und Zugriff auf den Objektkatalog."
      },
      {
        title: "Soziale Integration",
        description: "Verwendung eines Facebook-Feeds zur Anzeige von Neuigkeiten, wodurch das Freiwilligenteam nur einen Kommunikationskanal verwalten muss, während die Website automatisch mit Inhalten versorgt wird."
      },
      {
        title: "Kreative Zusammenarbeit",
        description: "Enge Zusammenarbeit mit einer Designerin, die die visuelle Identität und grafischen Elemente erstellt hat und dem Projekt trotz der Einschränkungen eine professionelle Dimension verleiht."
      },
      {
        title: "Adaptiver Dunkelmodus",
        description: "Implementierung eines Dunkelmodus, der sich automatisch an die Systemeinstellungen des Benutzers anpasst, ohne Umschalttaste, um die visuelle Identität des Vereins im standardmäßigen Hellmodus zu bewahren, während der visuelle Komfort verbessert und der Energieverbrauch auf Geräten mit OLED/AMOLED-Bildschirmen reduziert wird."
      },
      {
        title: "Interaktiver Veranstaltungskalender",
        description: "Entwicklung eines intuitiven Kalenders mit Alpine.js, der Besuchern eine schnelle Visualisierung kommender Workshops und Veranstaltungen ermöglicht."
      },
      {
        title: "Automatisierung der Aktualisierungen",
        description: "Erstellung eines GitHub Actions-Workflows, der täglich Veranstaltungsdaten von der HelloAsso-API abruft und eine statische JSON-Datei generiert, wodurch Freiwillige Veranstaltungen ohne technische Eingriffe aktualisieren können."
      }
    ],

    lessonsTitle: "Gelernte Lektionen",
    lessons: [
      "Die Anpassung technischer Lösungen an reale Einschränkungen ist wichtiger als technische Perfektion",
      "Intelligente Integration von Drittanbieterdiensten kann Budgetbeschränkungen ausgleichen",
      "Gut konzipierte Automatisierung ist eine Investition, die nicht-technische Teams langfristig stärkt",
    ],
    
    techTitle: "Verwendete Technologien und Tools",
    
    visitSite: "Website besuchen",
    nextProject: "Nächstes Projekt",
    allProjects: "Alle Projekte",
    reflectionTitle: "Persönliche Reflexion",
    reflectionText: "Dieses Projekt, obwohl technisch nicht perfekt, stellt einen wichtigen Schritt in meiner Entwicklung als Entwickler dar. Es wurde freiwillig für einen lokalen Verein erstellt und adressiert mit den verfügbaren Ressourcen einen konkreten Bedarf. Wenn ich es heute noch einmal machen würde, würde ich Alternativen zu Iframes erkunden und mehr Wert auf Leistung legen. Nichtsdestotrotz erfüllt diese Website ihre Hauptaufgabe effektiv: einer umweltfreundlichen Vereinigung zu helfen, das Teilen von Objekten in ihrer Gemeinschaft zu fördern, während der Bedarf an technischen Eingriffen dank Automatisierung minimiert wird."
  }
};

// Utiliser la langue demandée ou français par défaut
const t = content[lang] || content.fr;

// Technologies utilisées
const technologies = [
  "Astro",
  "CSS Pro",
  "TypeScript", 
  "Alpine.js",
  "GitHub Actions",
  "API HelloAsso",
];

// Obtenir les projets précédent et suivant selon la langue
const getProjectUrl = (projectId: string) => `/${lang}/esport`;
const nextProject = {
  id: "esport",
  title: lang === "fr" ? 
    "Application e-sport avec chat" :
    (lang === "en" ? 
      "E-sport Application with Chat" : 
      "E-Sport-Anwendung mit Chat")
};
---

<Layout title={t.title} description={t.description} lang={lang}>
  <div class="container mx-auto px-4 py-8">
    <div class="mb-4">
      <a href={`/${lang}/projects`} class="text-text-muted hover:text-accent transition-colors">
        &larr; {t.allProjects}
      </a>
    </div>
    
    <!-- En-tête du projet -->
    <header class="mb-10">
      <h1 class="text-3xl font-bold mb-6 border-b border-accent pb-2">
        {t.projectTitle} (2024)
      </h1>
      <p class="text-lg mb-6 max-w-3xl">
        {t.projectIntro}
      </p>
    </header>
    
    <!-- Image principale du projet -->
    <div class="mb-10 bg-secondary bg-opacity-30 p-4 rounded-lg">
      <Picture
        src={objetImage}
        widths={[800, 1200, 1600]}
        formats={["avif", "webp", "jpg"]}
        alt={t.projectTitle}
        class="w-full rounded-lg"
      />
    </div>
    
    <!-- Aperçu du projet -->
    <section class="mb-10">
      <h2 class="text-2xl font-bold mb-4 text-accent">
        {t.overviewTitle}
      </h2>
      <p class="mb-6" set:html={t.overviewText}></p>
      
      <!-- Actions principales -->
      <div class="flex flex-wrap gap-4 mb-8">
        <a 
          href="https://objethequecornouaille.fr/"
          target="_blank"
          rel="noopener noreferrer"
          class="cta-button"
        >
          {t.visitSite}
        </a>
      </div>
    </section>
    <!-- Images secondaires -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 my-8">
      <div class="bg-secondary bg-opacity-30 p-2 rounded-lg">
      <Picture
        src={objetImage2}
        widths={[400, 600, 900]}
        formats={["avif", "webp", "jpg"]}
        alt="Interface de l'Objethèque"
        class="w-full h-full object-cover rounded-lg"
      />
      </div>
      <div class="bg-secondary bg-opacity-30 p-2 rounded-lg">
      <Picture
        src={objetImage3}
        widths={[400, 600, 900]}
        formats={["avif", "webp", "jpg"]}
        alt="Section catalogue de l'Objethèque"
        class="w-full h-full object-cover rounded-lg"
      />
    </div>
    </div>
    
    <!-- Défis techniques -->
    <section class="mb-10">
      <h2 class="text-2xl font-bold mb-6 text-accent">
        {t.challengesTitle}
      </h2>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
        {t.challenges.map((challenge, index) => (
          <div class="bg-secondary bg-opacity-10 p-4 rounded-lg">
            <div class="flex items-center mb-2">
              <div class="w-8 h-8 bg-accent text-primary rounded-full flex items-center justify-center mr-3 flex-shrink-0">
                {index + 1}
              </div>
              <h4 class="font-medium">{challenge.title}</h4>
            </div>
            <p class="ml-11">{challenge.description}</p>
          </div>
        ))}
      </div>
    </section>
    
    <!-- Solutions mises en œuvre -->
    <section class="mb-10">
      <h2 class="text-2xl font-bold mb-6 text-accent">
        {t.solutionsTitle}
      </h2>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        {t.solutions.map((solution, index) => (
          <div class="bg-secondary bg-opacity-20 p-5 rounded-lg">
            <div class="flex justify-between items-center mb-3">
            <h3 class="text-xl font-semibold mb-3 flex items-center">
              {solution.title}</h3>
              <span class="text-xl">
                {index === 0 ? "💼" : 
                 index === 1 ? "🎯" : 
                 index === 2 ? "🔄" : 
                 index === 3 ? "🎨" : 
                 index === 4 ? "🌓" : 
                 index === 5 ? "📅" : 
                 "🤖"}
              </span>
            </div>
            <p>{solution.description}</p>
          </div>
        ))}
      </div>
    </section>

    <!-- Images secondaires 2-->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 my-8">
      <div class="bg-secondary bg-opacity-30 p-2 rounded-lg">
      <Picture
        src={objetImage4}
        widths={[400, 600, 900]}
        formats={["avif", "webp", "jpg"]}
        alt="Interface de l'Objethèque"
        class="w-full h-full object-cover rounded-lg"
      />
    </div>
    <div class="bg-secondary bg-opacity-30 p-2 rounded-lg">
      <Picture
        src={objetImage5}
        widths={[400, 600, 900]}
        formats={["avif", "webp", "jpg"]}
        alt="Section catalogue de l'Objethèque"
        class="w-full h-full object-cover rounded-lg"
      />
    </div>
    </div>
    
    <!-- Leçons apprises -->
    <section class="mb-10">
      <h2 class="text-2xl font-bold mb-4 text-accent">
        {t.lessonsTitle}
      </h2>
      <ul class="list-disc pl-6 space-y-2">
        {t.lessons.map(lesson => (
          <li>{lesson}</li>
        ))}
      </ul>
    </section>
    
    <!-- Réflexion personnelle -->
    <section class="mb-10 bg-secondary bg-opacity-10 p-6 rounded-lg border-l-4 border-accent">
      <div class="flex flex-col md:flex-row">
        <h2 class="text-2xl font-bold mb-4 md:mr-20 text-accent flex items-center">
          {t.reflectionTitle}
        </h2>
        <p class="italic max-w-3xl">
          {t.reflectionText}
        </p>
      </div>
    </section>
    
    <!-- Technologies utilisées -->
    <section class="mb-16">
      <h2 class="text-2xl font-bold mb-4 text-accent">
        {t.techTitle}
      </h2>
      <div class="flex flex-wrap gap-2 mb-6">
        {technologies.map(tech => (
          <span class="px-3 py-1 bg-accent bg-opacity-20 rounded-full transition-all hover:bg-opacity-40">
            {tech}
          </span>
        ))}
      </div>
    </section>
    
    <!-- Navigation entre projets -->
    <div class="border-t border-secondary pt-8 mt-12 flex justify-end">
      <a href={getProjectUrl(nextProject.id)} class="btn-secondary">
        {t.nextProject}: {nextProject.title} &rarr;
      </a>
    </div>
    
    <!-- CTA de contact -->
    <CtaDispo />
  </div>
</Layout>