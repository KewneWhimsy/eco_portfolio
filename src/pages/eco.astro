---
// Redirect to default language (fr) in eco mode
import Layout from "../layouts/layout.astro"
---

<script>
  // Vérifier si la langue est déjà dans localStorage
  const storedLang = localStorage.getItem('preferredLanguage');
  // Obtenir la langue du navigateur
  const browserLang = navigator.language.split('-')[0];
  // Langues supportées
  const supportedLangs = ['fr', 'en', 'de'];
  
  // Déterminer la langue à utiliser (priorité : stockée > navigateur > français)
  let targetLang = 'fr';
  
  if (storedLang && supportedLangs.includes(storedLang)) {
    targetLang = storedLang;
  } else if (supportedLangs.includes(browserLang)) {
    targetLang = browserLang;
    // Stocker la préférence
    localStorage.setItem('preferredLanguage', targetLang);
  }
  
  // Rediriger vers la langue cible en mode éco
  window.location.href = `/${targetLang}/eco`;
</script>

<!-- Fallback pour les navigateurs sans JavaScript -->
<meta http-equiv="refresh" content="0;url=/fr/eco" />

<Layout title="Josselin KW eco" description="" lang="">
<body>
  <p class="ml-2">Redirection vers la version éco du portfolio...</p>
  <p class="ml-2"><a class="text-link" href="/fr/eco">Cliquez ici si vous n'êtes pas redirigé automatiquement</a></p>
</body>
</Layout>